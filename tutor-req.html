<!DOCTYPE html>
<html lang="en" class="h-full bg-gray-100">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>OAU ExamGuard — Request a Tutor</title>
  <!-- TailwindCSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome for Star icons & Socials -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
  <style>
    .modal-bg {
      background: rgba(15,23,42,0.18);
      backdrop-filter: blur(2px);
    }
    .tutor-card {
      transition: transform .18s, box-shadow .18s;
    }
    .tutor-card:hover {
      transform: translateY(-8px) scale(1.03);
      box-shadow: 0 14px 32px rgba(67,56,202,0.16), 0 2px 8px rgba(31,41,55,.13);
      background: linear-gradient(100deg, #f3f4f6 80%, #e0e7ff 100%);
    }
    .tutor-avatar {
      background: #eef2ff;
      object-fit: cover;
      border: 3px solid #4f46e5;
    }
    .modal-show {
      display: flex !important;
    }
    .specialty-pill {
      background: #6366f1;
      color: #fff;
      border-radius: 15px;
      font-size: 13px;
      padding: 3px 13px;
      margin: 0 8px 8px 0;
      display: inline-block;
      font-weight: 500;
      box-shadow: 0 1px 2px rgba(99,102,241,0.06);
    }
    /* Hide scrollbar for lists horizontally */
    .hide-scrollbar::-webkit-scrollbar {
      display: none;
    }
  </style>
</head>
<body class="h-full bg-gray-100 font-sans">

  <!-- HEADER -->
  <header class="bg-white border-b shadow-sm fixed top-0 left-0 right-0 z-40">
    <div class="max-w-6xl mx-auto flex items-center justify-between px-5 py-3">
      <div class="flex items-center gap-4">
        <span class="text-indigo-800 font-bold text-2xl">OAU ExamGuard</span>
        <span class="text-xs text-gray-500 pl-2">| Request a Tutor</span>
      </div>
      <div>
        <a href="nng.html" class="text-indigo-700 font-semibold hover:underline mr-4">Dashboard</a>
        <a href="earnings.html" class="text-gray-700 font-semibold hover:underline mr-4">Earnings</a>
        <a href="transfer.html" class="text-gray-700 font-semibold hover:underline">Transfer</a>
      </div>
    </div>
  </header>

  <main class="pt-20 max-w-6xl mx-auto px-5 pb-16">
    <h1 class="text-3xl md:text-4xl font-extrabold mb-2 text-indigo-800 mt-4">Find & Book the Perfect Tutor</h1>
    <div class="text-md text-gray-600 max-w-2xl mb-8">Browse through our elite panel of tutors. Click on a tutor to explore more details, their specialties, see students' feedback and, when ready, request for their tutoring service.</div>
    
    <!-- Filters -->
    <section class="mb-6 flex flex-col md:flex-row gap-3 md:items-center justify-between px-1">
      <div class="flex flex-wrap gap-3 items-center">
        <input id="searchTutor" type="text" placeholder="Search by name, subject, skill..." class="w-[220px] px-4 py-2 rounded border outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 transition"/>
        <select id="filterSpecialty" class="px-4 py-2 rounded border outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 transition text-gray-800">
          <option value="">All Specialties</option>
        </select>
        <button id="clearFilterBtn" class="bg-gray-100 px-3 py-2 rounded hover:bg-gray-200 text-sm border">Clear</button>
      </div>
      <div>
        <span class="text-xs text-gray-400">* Click a card for more details</span>
      </div>
    </section>

    <!-- Tutors List -->
    <section id="tutorsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-8 hide-scrollbar"></section>

    <!-- No tutors found -->
    <div id="noTutorsMsg" class="hidden mt-12 text-center text-xl text-gray-400 font-semibold">
      No tutors found. Try adjusting filters or search terms.
    </div>
  </main>

  <!-- Tutor Detail MODAL -->
  <div id="tutorModal" class="fixed inset-0 modal-bg z-50 items-center justify-center hidden transition-all">
    <div class="bg-white max-w-2xl w-full mx-4 rounded-2xl shadow-2xl p-8 md:p-10 relative animate-fadeIn">
      <button aria-label="Close Modal" onclick="closeTutorModal()" class="absolute top-4 right-4 text-gray-400 hover:text-red-700 text-2xl font-black">&times;</button>
        <!-- Modal Content -->
        <div id="modalTutorContent"></div>
    </div>
  </div>

  <footer class="text-center text-xs text-gray-400 mt-16 mb-6">
    &copy; OAU ExamGuard — Tutors
  </footer>

<script>
// ============== DUMMY DATA ===============
// In production, fetch from your API instead!
const ALL_TUTORS = [
  {
    id: 1,
    name: "Dr. Janet Adetayo",
    avatar: "https://randomuser.me/api/portraits/women/65.jpg",
    specialties: ["Biology", "WAEC/UTME Sciences", "IGCSE", "A-Levels"],
    about: "Award-winning Biology tutor with a PhD in Genetics and 15+ years experience.",
    rating: 4.9,
    reviews: 51,
    achievements: [
      "2022 NNPC National Outstanding Teacher Award",
      "Over 700 students mentored for UTME/WAEC success",
      "Lead Author — Senior Secondary Biology Textbook"
    ],
    socials: { linkedin: "https://linkedin.com/in/janetadetayo", twitter: "https://twitter.com/drjanetbio" }
  },
  {
    id: 2,
    name: "Mr. Samuel Bamidele",
    avatar: "https://randomuser.me/api/portraits/men/39.jpg",
    specialties: ["Mathematics", "Further Maths", "Olympiad Coaching"],
    about: "International Math Olympiad instructor. 98% A-rated student results!",
    rating: 4.7,
    reviews: 38,
    achievements: [
      "Added to Nigerian Mathematics Hall of Fame, 2021",
      "Author — 'Algebra Unlocked' Course",
      "Mentor for 5 National Olympiad Gold Medalists"
    ],
    socials: { linkedin: "https://linkedin.com/in/sammaths", }
  },
  {
    id: 3,
    name: "Ms. Ife Oluwasegun",
    avatar: "https://randomuser.me/api/portraits/women/68.jpg",
    specialties: ["English", "Essay Writing", "Interview Prep"],
    about: "Passionate English tutor, specialized in WAEC and IELTS success.",
    rating: 4.8,
    reviews: 43,
    achievements: [
      "Trained over 400 IELTS candidates; 94% score band 7+",
      "Published author and public speaker",
      "Coordinator — OAU English Class Outreach"
    ],
    socials: { linkedin: "https://linkedin.com/in/ifeoluwasegun", instagram: "https://instagram.com/tutorife" }
  },
  {
    id: 4,
    name: "Engr. Chinedu Okoye",
    avatar: "https://randomuser.me/api/portraits/men/23.jpg",
    specialties: ["Physics", "STEM Tutorials", "Robotics"],
    about: "Engineering graduate. Inspiring students through hands-on STEM.",
    rating: 4.6,
    reviews: 29,
    achievements: [
      "Launched OAU Robotics Bootcamp",
      "Invited judge — Young Inventors Challenge",
      "Helped 10+ students win science fairs"
    ],
    socials: { linkedin: "https://linkedin.com/in/engrchinedu" }
  }
];

// ================ UI LOGIC ================
const tutorsGrid = document.getElementById('tutorsGrid');
const searchTutor = document.getElementById('searchTutor');
const filterSpecialty = document.getElementById('filterSpecialty');
const clearFilterBtn = document.getElementById('clearFilterBtn');
const noTutorsMsg = document.getElementById('noTutorsMsg');
const tutorModal = document.getElementById('tutorModal');
const modalTutorContent = document.getElementById('modalTutorContent');

let allTutors = [];
let filteredTutors = []; // after applyFilter()

// Populate specialties dropdown
function refreshSpecialtiesDropdown() {
  let specialties = new Set();
  ALL_TUTORS.forEach(t => t.specialties.forEach(s => specialties.add(s)));
  filterSpecialty.innerHTML = `<option value="">All Specialties</option>`;
  Array.from(specialties).sort().forEach(sp => {
    filterSpecialty.innerHTML += `<option value="${sp}">${sp}</option>`;
  });
}

// Build tutor card
function buildTutorCard(tutor) {
  return `
    <div onclick="showTutorModal(${tutor.id})" class="tutor-card bg-white shadow-md rounded-2xl p-6 cursor-pointer relative flex flex-col h-full hover:z-10">
      <div class="flex items-center gap-4 mb-3">
        <img src="${tutor.avatar}" alt="${tutor.name}" class="w-16 h-16 rounded-full tutor-avatar shadow"/>
        <div>
          <div class="font-extrabold text-indigo-700 text-lg">${tutor.name}</div>
          <div class="flex gap-1 mt-1">${renderStars(tutor.rating)}
            <span class="ml-1 text-xs text-gray-500 font-semibold">(${tutor.reviews})</span>
          </div>
        </div>
      </div>
      <div class="mb-2 text-gray-600 font-medium" title="${tutor.about}">${tutor.about}</div>
      <div class="flex flex-wrap mb-2">
        ${tutor.specialties.map(s => `<span class="specialty-pill">${s}</span>`).join('')}
      </div>
      <button class="mt-3 ml-auto px-5 py-1 bg-indigo-600 text-white rounded-full font-semibold shadow hover:bg-indigo-700 transition text-sm">View Details</button>
    </div>
  `;
}

function renderStars(rating, max=5) {
  let intPart = Math.floor(rating), half = (rating - intPart >= 0.5);
  let stars = '';
  for (let i = 0; i < intPart; i++) stars += `<i class="fa fa-star text-yellow-400"></i>`;
  if (half) stars += `<i class="fa fa-star-half-stroke text-yellow-400"></i>`;
  for (let i = intPart + (half ? 1 : 0); i < max; i++) stars += `<i class="fa-regular fa-star text-gray-300"></i>`;
  return stars;
}

// Filter tutors
function applyTutorFilter() {
  let search = (searchTutor.value || '').trim().toLowerCase();
  let spec = filterSpecialty.value.trim();

  filteredTutors = allTutors.filter(t => {
    let match = true;
    if (search) {
      match = (
        t.name.toLowerCase().includes(search) ||
        t.about.toLowerCase().includes(search) ||
        (t.specialties && t.specialties.some(s => s.toLowerCase().includes(search)))
      );
    }
    if (spec) match = match && t.specialties.includes(spec);
    return match;
  });

  tutorsGrid.innerHTML = '';
  if (!filteredTutors.length) {
    tutorsGrid.innerHTML = '';
    noTutorsMsg.classList.remove('hidden');
    return;
  } else {
    noTutorsMsg.classList.add('hidden');
  }
  filteredTutors.forEach(tutor => {
    tutorsGrid.innerHTML += buildTutorCard(tutor);
  });
}

// Modal functions
window.showTutorModal = function(tutorId) {
  let tutor = allTutors.find(t => t.id == tutorId);
  if (!tutor) return;

  modalTutorContent.innerHTML = `
    <div class="flex flex-col md:flex-row gap-8 items-start">
      <div>
        <img src="${tutor.avatar}" alt="${tutor.name}" class="w-32 h-32 rounded-full border-4 border-indigo-600 object-cover"/>
        <div class="mt-3 flex gap-2 text-xl text-indigo-700">
          ${Object.entries(tutor.socials || {}).map(([key, url]) => 
            `<a href="${url}" target="_blank" title="${key}" class="hover:text-indigo-500"><i class="fa-brands fa-${key}"></i></a>`
          ).join('')}
        </div>
      </div>
      <div class="flex-1">
        <div class="text-2xl font-bold text-indigo-900 mb-1">${tutor.name}</div>
        <div class="flex gap-2 mb-2 text-lg">${renderStars(tutor.rating, 5)} 
           <span class="text-base text-indigo-600 font-semibold ml-2">(${tutor.rating})</span>
        </div>
        <div class="text-gray-700 mb-3 font-medium">${tutor.about}</div>
        <div class="mb-4">
          <div class="font-bold text-indigo-700 mb-1">Specialties:</div>
          ${tutor.specialties.map(s => `<span class="specialty-pill">${s}</span>`).join('')}
        </div>
        <div class="mb-4">
          <div class="font-bold text-indigo-700 mb-1">Achievements & Track Record:</div>
          <ul class="list-disc pl-6 text-sm text-gray-800 space-y-1"> 
            ${tutor.achievements.map(a => `<li>${a}</li>`).join('')}
          </ul>
        </div>
        <div>
          <button onclick="requestTutor(${tutor.id})" class="bg-indigo-700 hover:bg-indigo-600 text-white font-bold px-8 py-3 rounded-lg text-lg shadow active:scale-95 transition">
            Request Tutoring with ${tutor.name.split(' ')[0]}
          </button>
        </div>
      </div>
    </div>
  `;
  tutorModal.classList.remove('hidden');
  tutorModal.classList.add('modal-show');
  document.body.style.overflow = "hidden";
}
function closeTutorModal() {
  tutorModal.classList.remove('modal-show');
  tutorModal.classList.add('hidden');
  document.body.style.overflow = "";
}

// Simulate "request for tutor" action
window.requestTutor = function(tutorId) {
  let tutor = allTutors.find(t => t.id == tutorId);
  closeTutorModal();
  setTimeout(() => {
    alert("Your request for " + (tutor ? tutor.name : "selected tutor") + " has been received! You will be contacted soon.");
  }, 450);
};

// UI bindings
searchTutor.addEventListener('input', applyTutorFilter);
filterSpecialty.addEventListener('change', applyTutorFilter);
clearFilterBtn.addEventListener('click', ()=>{
  searchTutor.value = "";
  filterSpecialty.value = "";
  applyTutorFilter();
});

// Dismiss modal with escape key or click background
tutorModal.addEventListener('click', (e) => {
  if (e.target === tutorModal) closeTutorModal();
});
window.addEventListener('keydown', e => {
  if (e.key === "Escape") closeTutorModal();
});

// =========== INITIALIZE PAGE ===========
function loadTutors() {
  // Simulate fetch if needed, could await API
  allTutors = [...ALL_TUTORS];
  refreshSpecialtiesDropdown();
  applyTutorFilter();
}
document.addEventListener('DOMContentLoaded', loadTutors);

</script>
</body>
</html>
