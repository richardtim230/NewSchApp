<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Teacher Dashboard | ExamGuard</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css?family=Inter:400,500,600,700&display=swap" rel="stylesheet">
  <link rel="icon" href="logo.png">

  <style>
    :root{
      --blue-900:#0f172a;
      --blue-700:#1e3a8a;
      --accent:#6366f1;
      --accent-2:#3b82f6;
      --gold:#ffe066;
      --muted:#94a3b8;
      --glass: rgba(255,255,255,0.6);
      --card-bg: #ffffff;
      --radius: 12px;
    }

    html,body{
      height:100%;
      margin:0;
      font-family: 'Inter', Arial, sans-serif;
      background: linear-gradient(180deg,#f5f7ff 0%, #eef2ff 100%);
      color: var(--blue-900);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      font-size:14px;
      box-sizing:border-box;
    }
    *,*:before,*:after{box-sizing:inherit}

    /* Layout */
    .app {
      display: flex;
      min-height: 100vh;
      width: 100%;
      align-items: stretch;
    }

    /* Sidebar */
    .sidebar {
      width: 260px;
      background: linear-gradient(180deg,var(--blue-700),var(--accent-2));
      color: #fff;
      padding: 22px 16px;
      display:flex;
      flex-direction: column;
      gap:16px;
      box-shadow: 3px 0 20px rgba(51,65,85,0.08);
      position: fixed;
      left:0; top:0; bottom:0;
      z-index:30;
      transition: transform .28s ease;
    }
    .sidebar.collapsed { transform: translateX(-100%); }

    .brand {
      display:flex; align-items:center; gap:12px;
    }
    .brand img { width:44px; height:44px; border-radius:8px; border:2px solid rgba(255,224,102,0.18); object-fit:contain; background:#fff;}
    .brand .title { font-weight:700; font-size:1.05rem; color:var(--gold); letter-spacing:0.02em; }
    .sidebar .role { font-size:0.9rem; color: rgba(255,255,255,0.9); opacity:0.95; }

    .nav { display:flex; flex-direction:column; gap:6px; margin-top:6px; }
    .nav a {
      color: #dbeafe;
      text-decoration: none;
      padding: 10px 12px;
      border-radius:10px;
      display:flex; align-items:center; gap:10px;
      transition: background .14s, transform .12s;
      font-weight:600;
    }
    .nav a.active, .nav a:hover {
      background: rgba(255,255,255,0.04);
      color: var(--gold);
      transform: translateX(2px);
    }

    .sidebar .footer {
      margin-top:auto;
      font-size:0.9rem;
      color: rgba(255,255,255,0.85);
      border-top:1px solid rgba(255,255,255,0.04);
      padding-top:12px;
    }

    /* Main area */
    .main {
      margin-left: 260px;
      padding: 20px 28px;
      flex:1;
      transition: margin-left .28s;
      min-height: 100vh;
    }
    .main.compact { margin-left: 0; }

    .topbar {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 18px;
    }

    .search {
      display:flex; align-items:center; gap:8px;
      background:var(--card-bg); padding:8px 12px; border-radius:10px;
      box-shadow:0 6px 18px rgba(99,102,241,0.06);
      width: 540px; max-width: 62vw;
    }
    .search input{
      border: none; outline:none; font-size:14px; width:100%;
      background: transparent;
    }

    .user {
      display:flex; align-items:center; gap:12px;
    }
    .user img { width:44px; height:44px; border-radius:50%; object-fit:cover; border:2px solid var(--gold); }
    .user .meta { text-align:right; }
    .user .meta .name { font-weight:700; }
    .user .meta .small { font-size:0.84rem; color:var(--muted); }

    /* Dashboard grid */
    .grid {
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 16px;
      align-items: start;
    }

    /* Cards */
    .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: 0 8px 28px rgba(11,42,60,0.04);
      border: 1px solid rgba(11,42,60,0.03);
    }

    .card.h-100 { height:100%; display:flex; flex-direction:column; justify-content:space-between; }

    .kpi {
      display:flex; gap:14px; align-items:center;
    }
    .kpi .value { font-weight:800; font-size:1.55rem; color:var(--blue-700); }
    .kpi .label { color:var(--muted); font-weight:600; font-size:0.92rem; }

    /* Layout placements */
    .col-span-4 { grid-column: span 4; }
    .col-span-8 { grid-column: span 8; }
    .col-span-6 { grid-column: span 6; }
    .col-span-3 { grid-column: span 3; }
    .col-span-9 { grid-column: span 9; }
    .col-span-12 { grid-column: 1 / -1; }

    /* Class list */
    .class-list { display:flex; flex-direction:column; gap:10px; }
    .class-item { display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px; border-radius:10px; background: linear-gradient(90deg,#fff,#fbfdff); border:1px solid #eef3ff; }
    .class-item .left { display:flex; gap:12px; align-items:center; }
    .class-badge { width:46px; height:46px; border-radius:10px; background: linear-gradient(135deg,var(--accent),var(--accent-2)); color:#fff; display:flex; align-items:center; justify-content:center; font-weight:800; font-size:1.05rem; box-shadow:0 6px 18px rgba(99,102,241,0.08); }
    .class-meta .sub { color:var(--muted); font-size:0.88rem; }

    /* Recent activity */
    .activity { display:flex; flex-direction:column; gap:8px; max-height:320px; overflow:auto; padding-right:6px; }
    .activity .item { display:flex; gap:10px; align-items:flex-start; padding:8px; border-radius:8px; }
    .dot { width:8px; height:8px; border-radius:50%; margin-top:6px; }

    /* Table */
    table.simple { width:100%; border-collapse:collapse; font-size:0.95rem; }
    table.simple th, table.simple td { padding:10px 8px; text-align:left; }
    table.simple thead th { font-weight:700; color:var(--accent); background: rgba(59,130,246,0.06); }

    /* Actions */
    .actions { display:flex; gap:10px; flex-wrap:wrap; }
    .btn {
      padding:10px 14px; border-radius:10px; border:none; cursor:pointer;
      background: linear-gradient(90deg,var(--accent),var(--accent-2));
      color:#fff; font-weight:700;
      box-shadow:0 6px 18px rgba(99,102,241,0.12);
    }
    .btn.ghost { background:transparent; color:var(--accent); border:1px solid rgba(59,130,246,0.12); box-shadow:none; font-weight:600; }

    /* Small widgets */
    .widget { display:flex; align-items:center; justify-content:space-between; gap:12px; padding:12px; border-radius:10px; background:linear-gradient(90deg,#fff,#fbfdff); border:1px solid #eef3ff; }

    /* Responsive */
    @media (max-width: 1100px){
      .grid { grid-template-columns: repeat(6, 1fr); }
      .col-span-4 { grid-column: span 3; }
      .col-span-8 { grid-column: span 6; }
      .col-span-3 { grid-column: span 2; }
      .col-span-6 { grid-column: span 3; }
      .col-span-9 { grid-column: span 6; }
    }
    @media (max-width: 720px){
      .sidebar { position: fixed; transform: translateX(-100%); }
      .sidebar.open { transform: translateX(0); }
      .main { margin-left: 0; padding: 12px; }
      .search { width: 100%; max-width: none; }
      .grid { grid-template-columns: repeat(1, 1fr); }
      .col-span-4, .col-span-8, .col-span-6, .col-span-3, .col-span-9 { grid-column: auto; }
    }

    /* Tiny helpers */
    .muted { color:var(--muted); }
    .small { font-size:0.86rem; color:var(--muted); }
    .center { text-align:center; }

    /* Floating quick action */
    .fab {
      position: fixed;
      right: 22px;
      bottom: 22px;
      width:56px;
      height:56px;
      border-radius: 999px;
      display:flex; align-items:center; justify-content:center;
      background: linear-gradient(180deg,var(--accent),var(--accent-2));
      color:#fff; font-weight:800; font-size:1.3rem;
      box-shadow: 0 14px 36px rgba(59,130,246,0.18);
      cursor:pointer;
      z-index:60;
      border: 3px solid rgba(255,224,102,0.08);
    }

    /* Lightweight toast */
    .toast {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 92px;
      background: rgba(15,23,42,0.96);
      color: #fff;
      padding: 10px 14px;
      border-radius: 8px;
      display:none;
      z-index:80;
      font-weight:600;
    }

  </style>
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="brand">
        <img src="logo.png" alt="Logo">
        <div>
          <div class="title">Teacher Portal</div>
          <div class="role small">Instructor ‚Ä¢ Sunrise High</div>
        </div>
      </div>

      <nav class="nav" aria-label="Main navigation">
        <a href="#" data-section="overview" class="active" onclick="navigate(event)">üè† Overview</a>
        <a href="#" data-section="classes" onclick="navigate(event)">üìö My Classes</a>
        <a href="#" data-section="attendance" onclick="navigate(event)">üóì Attendance</a>
        <a href="#" data-section="gradebook" onclick="navigate(event)">üìù Gradebook</a>
        <a href="#" data-section="timetable" onclick="navigate(event)">‚è∞ Timetable</a>
        <a href="#" data-section="messages" onclick="navigate(event)">‚úâÔ∏è Messages</a>
        <a href="#" data-section="resources" onclick="navigate(event)">üìÇ Resources</a>
        <a href="#" data-section="settings" onclick="navigate(event)">‚öôÔ∏è Settings</a>
      </nav>

      <div class="footer">
        <div style="display:flex;align-items:center;gap:10px;">
          <img src="admin.png" alt="You" style="width:40px;height:40px;border-radius:50%;object-fit:cover;border:2px solid var(--gold);">
          <div>
            <div style="font-weight:700">Mrs. Johnson</div>
            <div class="small">Mathematics</div>
          </div>
        </div>
        <div style="margin-top:10px;font-size:0.88rem;">
          <button class="btn ghost" onclick="openQuick('announce')">Post Announcement</button>
        </div>
      </div>
    </aside>

    <!-- Main -->
    <main class="main" id="main">
      <div class="topbar">
        <div style="display:flex;align-items:center;gap:12px;">
          <button class="btn ghost" onclick="toggleSidebarMobile()" aria-label="open menu">‚ò∞</button>
          <div class="search card">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.35-4.35" stroke="#94a3b8" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="#94a3b8" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <input placeholder="Search students, classes, activities..." id="globalSearch" oninput="onSearch(event)">
          </div>
        </div>

        <div class="user">
          <div style="text-align:right;margin-right:8px;">
            <div class="small">Good afternoon</div>
            <div class="name">Mrs. Johnson</div>
          </div>
          <img src="admin.png" alt="You">
        </div>
      </div>

      <!-- Sections -->
      <section id="overview" class="section active">
        <div class="grid" style="margin-bottom:14px;">
          <div class="card col-span-4">
            <div style="display:flex;align-items:center;justify-content:space-between;">
              <div>
                <div class="small">THIS WEEK'S CLASSES</div>
                <div style="font-weight:800;font-size:1.2rem;margin-top:6px;">4 Lessons</div>
                <div class="small muted" style="margin-top:6px;">Mon ‚Äî Fri ‚Ä¢ 7:30am ‚Äî 2:30pm</div>
              </div>
              <div style="text-align:center;">
                <div style="font-size:2.1rem;color:var(--accent);font-weight:900;">‚úèÔ∏è</div>
              </div>
            </div>
            <div style="margin-top:12px;">
              <div class="widget">
                <div>
                  <div class="small">Avg Class Attendance</div>
                  <div style="font-weight:800;font-size:1.15rem;">88%</div>
                </div>
                <div class="small muted">Last week: 84%</div>
              </div>
            </div>
          </div>

          <div class="card col-span-4">
            <div class="kpi">
              <div>
                <div class="small">STUDENTS</div>
                <div class="value" id="kpiStudents">320</div>
                <div class="small muted">Total across all your classes</div>
              </div>
              <div style="margin-left:auto">
                <div class="small">Assignments Due</div>
                <div style="font-weight:800;font-size:1.3rem;color:#ef4444">3</div>
              </div>
            </div>
          </div>

          <div class="card col-span-4">
            <div class="small">UPCOMING</div>
            <div style="display:flex;gap:8px;margin-top:8px;">
              <div style="flex:1">
                <div style="font-weight:800">Mock Test ‚Äî JSS2</div>
                <div class="small muted">Tomorrow ‚Ä¢ 9:00am</div>
              </div>
              <div style="text-align:right">
                <div class="small">Room</div>
                <div style="font-weight:800">Lab A</div>
              </div>
            </div>
          </div>
        </div>

        <div class="grid">
          <div class="card col-span-8 h-100">
            <div style="display:flex;align-items:center;justify-content:space-between;">
              <div style="font-weight:800;font-size:1.05rem;">My Classes</div>
              <div class="small muted">Manage class activities, assignments and roll calls</div>
            </div>

            <div style="margin-top:12px;" class="class-list" id="classList">
              <!-- classes inserted by JS -->
            </div>

            <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center;">
              <div class="small muted">Last synced: <span id="lastSync">Just now</span></div>
              <div>
                <button class="btn" onclick="openQuick('newClass')">+ New Class</button>
                <button class="btn ghost" onclick="openQuick('assign')">Create Assignment</button>
              </div>
            </div>
          </div>

          <div class="card col-span-4">
            <div style="display:flex;align-items:center;justify-content:space-between;">
              <div style="font-weight:800">Recent Activity</div>
              <div class="small muted">Live feed</div>
            </div>
            <div style="margin-top:10px;" class="activity" id="recentActivity">
              <!-- inserted by JS -->
            </div>
          </div>
        </div>

        <div class="grid" style="margin-top:14px;">
          <div class="card col-span-6">
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <div style="font-weight:800">Attendance Snapshot</div>
              <div class="small muted">This month</div>
            </div>
            <div style="margin-top:12px;">
              <table class="simple">
                <thead><tr><th>Class</th><th>Present</th><th>Absent</th></tr></thead>
                <tbody id="attendanceTable">
                  <!-- filled by JS -->
                </tbody>
              </table>
            </div>
          </div>

          <div class="card col-span-6">
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <div style="font-weight:800">Quick Links</div>
              <div class="small muted">One-click</div>
            </div>

            <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-top:12px;">
              <button class="btn ghost" onclick="openQuick('mark')">Mark Attendance</button>
              <button class="btn ghost" onclick="openQuick('grade')">Enter Grades</button>
              <button class="btn ghost" onclick="openQuick('message')">Message Parents</button>
              <button class="btn ghost" onclick="openQuick('resources')">Upload Resource</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Classes section -->
      <section id="classes" class="section" style="display:none">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
          <div style="font-weight:800;font-size:1.1rem;">My Classes</div>
          <div class="actions">
            <button class="btn" onclick="openQuick('newClass')">+ Create Class</button>
          </div>
        </div>

        <div class="grid">
          <div class="card col-span-8">
            <div id="classesGrid" style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px;">
              <!-- class tiles -->
            </div>
          </div>
          <div class="card col-span-4">
            <div style="font-weight:800">Class Insights</div>
            <div class="small muted" style="margin-top:8px;">Select a class to view details</div>
            <div style="margin-top:12px;">
              <div class="widget">
                <div>
                  <div class="small">Average Grade</div>
                  <div style="font-weight:800;font-size:1.2rem;">B2</div>
                </div>
                <div class="small muted">Updated today</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Attendance -->
      <section id="attendance" class="section" style="display:none">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div style="font-weight:800;font-size:1.05rem;">Attendance</div>
          <div class="small muted">Take roll or view reports</div>
        </div>

        <div style="margin-top:12px;">
          <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <div>
                <div style="font-weight:700">Today's Roll ‚Äî JSS2A</div>
                <div class="small muted">Class starts 09:00 AM</div>
              </div>
              <div>
                <button class="btn" onclick="markAllPresent()">Mark All Present</button>
                <button class="btn ghost" onclick="openQuick('attendanceReport')">Generate Report</button>
              </div>
            </div>

            <div style="margin-top:10px;overflow:auto;">
              <table class="simple" id="rollTable">
                <thead><tr><th>#</th><th>Student</th><th>Present</th><th>Notes</th></tr></thead>
                <tbody>
                  <!-- JS populated -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <!-- Gradebook -->
      <section id="gradebook" class="section" style="display:none">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div style="font-weight:800">Gradebook</div>
          <div class="small muted">Create assignments, enter marks</div>
        </div>

        <div style="margin-top:12px;">
          <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <div>
                <div style="font-weight:700">Assignments</div>
                <div class="small muted">Manage assignment submissions</div>
              </div>
              <div>
                <button class="btn" onclick="openQuick('assign')">+ New Assignment</button>
              </div>
            </div>

            <div style="margin-top:12px;">
              <table class="simple">
                <thead><tr><th>Title</th><th>Class</th><th>Due</th><th>Status</th></tr></thead>
                <tbody id="assignmentsList"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <!-- Timetable -->
      <section id="timetable" class="section" style="display:none">
        <div style="font-weight:800;margin-bottom:10px;">Timetable</div>
        <div class="card">
          <div class="small muted">Weekly schedule</div>
          <div style="margin-top:10px;">
            <table class="simple">
              <thead><tr><th>Day</th><th>08:00</th><th>09:00</th><th>10:00</th><th>11:00</th></tr></thead>
              <tbody>
                <tr><td>Mon</td><td>Math</td><td>English</td><td>Break</td><td>Physics</td></tr>
                <tr><td>Tue</td><td>Math</td><td>ICT</td><td>Break</td><td>Civics</td></tr>
                <tr><td>Wed</td><td>Math</td><td>English</td><td>Break</td><td>Music</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Messages -->
      <section id="messages" class="section" style="display:none">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div style="font-weight:800">Messages</div>
          <div class="small muted">Parent and student communications</div>
        </div>

        <div style="margin-top:12px;">
          <div class="card">
            <div style="display:flex;gap:10px;">
              <div style="width:260px;">
                <input placeholder="Search conversation..." style="width:100%;padding:8px;border-radius:8px;border:1px solid #eef3ff;">
                <div style="margin-top:12px;display:flex;flex-direction:column;gap:8px;">
                  <div style="padding:8px;border-radius:8px;background:#fbfdff;border:1px solid #eef3ff;cursor:pointer;">John Doe (Parent) <div class="small muted">2 unread</div></div>
                  <div style="padding:8px;border-radius:8px;background:#fff;border:1px solid #eef3ff;cursor:pointer;">Class Group Chat</div>
                </div>
              </div>
              <div style="flex:1;">
                <div style="height:300px;border-radius:10px;background:#fff;border:1px solid #eef3ff;padding:10px;overflow:auto;">Select a conversation to view messages.</div>
                <div style="margin-top:8px;display:flex;gap:8px;">
                  <input placeholder="Write a message..." style="flex:1;padding:9px;border-radius:8px;border:1px solid #eef3ff;">
                  <button class="btn">Send</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Resources -->
      <section id="resources" class="section" style="display:none">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div style="font-weight:800">Resources</div>
          <div class="small muted">Upload teaching resources</div>
        </div>
        <div style="margin-top:12px;">
          <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <div class="small muted">Upload PDF, Slides or Images</div>
              <div>
                <input type="file" id="resourceFile" style="display:none" onchange="uploadResource(event)">
                <button class="btn" onclick="document.getElementById('resourceFile').click()">Upload Resource</button>
              </div>
            </div>
            <div id="resourcesList" style="margin-top:12px;"></div>
          </div>
        </div>
      </section>

      <!-- Settings -->
      <section id="settings" class="section" style="display:none">
        <div style="font-weight:800">Settings</div>
        <div style="margin-top:12px;">
          <div class="card">
            <label class="small">Profile</label>
            <div style="display:flex;gap:10px;margin-top:8px;">
              <input placeholder="Full name" style="padding:8px;border-radius:8px;border:1px solid #eef3ff;">
              <input placeholder="Subject" style="padding:8px;border-radius:8px;border:1px solid #eef3ff;">
              <button class="btn">Save</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Floating FAB -->
      <div class="fab" title="Quick actions" onclick="openQuick('quick')">Ôºã</div>

      <div class="toast" id="toast"></div>
    </main>
  </div>

  <!-- Quick modals area -->
  <div id="quickRoot"></div>

  <script>
    // Lightweight interactive behavior & fake data for UX

    const classes = [
      { id: 'c1', name: 'JSS2A', subject: 'Mathematics', students: 32 },
      { id: 'c2', name: 'JSS3B', subject: 'English', students: 28 },
      { id: 'c3', name: 'SS1A', subject: 'Physics', students: 26 },
      { id: 'c4', name: 'SS2B', subject: 'Chemistry', students: 30 }
    ];

    const activities = [
      { t:'10m', text:'Marked attendance for JSS2A', color:'#60a5fa' },
      { t:'40m', text:'Uploaded resource: Algebra_Slides.pdf', color:'#34d399' },
      { t:'2h', text:'Sent message to parents (JSS3B)', color:'#f97316' },
      { t:'1d', text:'Published assignment: Mock Test', color:'#fb7185' },
    ];

    const assignments = [
      { title: 'Mock Test - Algebra', cls: 'JSS2A', due: '2026-03-12', status: 'Open' },
      { title: 'Homework: Factorization', cls: 'JSS3B', due: '2026-03-16', status: 'Open' },
      { title: 'Practical Report', cls: 'SS1A', due: '2026-03-18', status: 'Draft' }
    ];

    // Initialize UI
    function initUI(){
      const classList = document.getElementById('classList');
      classList.innerHTML = '';
      classes.forEach(c=>{
        const el = document.createElement('div');
        el.className = 'class-item';
        el.innerHTML = `
          <div class="left">
            <div class="class-badge">${c.name.split('')[0]}</div>
            <div class="class-meta">
              <div style="font-weight:800">${c.name} ‚Äî ${c.subject}</div>
              <div class="sub small muted">${c.students} students ‚Ä¢ View roster</div>
            </div>
          </div>
          <div style="display:flex;gap:8px;align-items:center;">
            <button class="btn ghost" onclick="openClass('${c.id}')">Open</button>
            <button class="btn" onclick="openQuick('mark', '${c.id}')">Roll</button>
          </div>
        `;
        classList.appendChild(el);
      });

      // recent activity
      const actEl = document.getElementById('recentActivity');
      actEl.innerHTML = '';
      activities.forEach(a=>{
        const item = document.createElement('div');
        item.className = 'item';
        item.innerHTML = `<div style="width:8px"><div class="dot" style="background:${a.color}"></div></div>
          <div>
            <div style="font-weight:700">${a.text}</div>
            <div class="small muted">${a.t} ago</div>
          </div>`;
        actEl.appendChild(item);
      });

      // attendance table
      const atT = document.getElementById('attendanceTable');
      atT.innerHTML = '';
      classes.slice(0,3).forEach(c=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${c.name}</td><td>28</td><td>${c.students-28}</td>`;
        atT.appendChild(tr);
      });

      // assignments
      const asList = document.getElementById('assignmentsList');
      asList.innerHTML = '';
      assignments.forEach(a=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${a.title}</td><td>${a.cls}</td><td>${a.due}</td><td>${a.status}</td>`;
        asList.appendChild(tr);
      });

      // classes grid
      const classesGrid = document.getElementById('classesGrid');
      classesGrid.innerHTML = '';
      classes.forEach(c=>{
        const card = document.createElement('div');
        card.className = 'card';
        card.style.display = 'flex';
        card.style.justifyContent = 'space-between';
        card.style.alignItems = 'center';
        card.style.padding = '14px';
        card.innerHTML = `<div>
          <div style="font-weight:800">${c.name}</div>
          <div class="small muted">${c.students} students ‚Ä¢ ${c.subject}</div>
        </div>
        <div>
          <button class="btn ghost" onclick="openClass('${c.id}')">Manage</button>
        </div>`;
        classesGrid.appendChild(card);
      });

      // resources list placeholder
      document.getElementById('resourcesList').innerHTML = '<div class="small muted">No resources uploaded yet.</div>';
    }

    function navigate(e){
      e.preventDefault();
      const el = e.currentTarget;
      document.querySelectorAll('.nav a').forEach(a=>a.classList.remove('active'));
      el.classList.add('active');

      const id = el.getAttribute('data-section');
      document.querySelectorAll('main .section').forEach(s=>s.style.display='none');
      const show = document.getElementById(id);
      if (show) show.style.display = '';
      window.scrollTo({top:0,behavior:'smooth'});
    }

    function openClass(id){
      showToast('Opening class ' + id);
      // realistic behavior: navigate to classes and show detail
      navigate({preventDefault:()=>{}, currentTarget:{ getAttribute: ()=>'classes', classList:{ add: ()=>{}}, }});
      // quick highlight
    }

    function onSearch(e){
      // small search stub
      const v = e.target.value.trim().toLowerCase();
      if (!v) return initUI();
      showToast('Search: ' + v);
    }

    function toggleSidebarMobile(){
      document.querySelector('.sidebar').classList.toggle('open');
    }

    // Quick action modals
    function openQuick(type, id){
      const root = document.getElementById('quickRoot');
      let html = '';
      if (type === 'announce'){
        html = modalWrap(`
          <h3>Post Announcement</h3>
          <textarea id="announceText" style="width:100%;min-height:90px;padding:8px;border-radius:8px;border:1px solid #eef3ff"></textarea>
          <div style="display:flex;gap:8px;justify-content:flex-end">
            <button class="btn ghost" onclick="closeQuick()">Cancel</button>
            <button class="btn" onclick="postAnnouncement()">Post</button>
          </div>
        `);
      } else if (type === 'newClass') {
        html = modalWrap(`
          <h3>Create a Class</h3>
          <input id="newClassName" placeholder="Class name e.g. JSS2A" style="width:100%;padding:8px;border-radius:8px;border:1px solid #eef3ff;">
          <input id="newClassSubject" placeholder="Subject" style="width:100%;padding:8px;border-radius:8px;border:1px solid #eef3ff;margin-top:8px;">
          <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px;">
            <button class="btn ghost" onclick="closeQuick()">Cancel</button>
            <button class="btn" onclick="createClass()">Create</button>
          </div>
        `);
      } else if (type === 'assign') {
        html = modalWrap(`
          <h3>Create Assignment</h3>
          <input id="assignTitle" placeholder="Title" style="width:100%;padding:8px;border-radius:8px;border:1px solid #eef3ff;">
          <input id="assignClass" placeholder="Class (e.g. JSS2A)" style="width:100%;padding:8px;border-radius:8px;border:1px solid #eef3ff;margin-top:8px;">
          <input id="assignDue" type="date" style="padding:8px;border-radius:8px;border:1px solid #eef3ff;margin-top:8px;">
          <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px;">
            <button class="btn ghost" onclick="closeQuick()">Cancel</button>
            <button class="btn" onclick="createAssignment()">Create</button>
          </div>
        `);
      } else if (type === 'mark') {
        html = modalWrap(`
          <h3>Mark Attendance</h3>
          <div class="small muted">Quick mark for selected class</div>
          <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px;">
            <button class="btn ghost" onclick="closeQuick()">Close</button>
            <button class="btn" onclick="showToast('Attendance marked')">Mark</button>
          </div>
        `);
      } else if (type === 'message') {
        html = modalWrap(`
          <h3>Message Parents</h3>
          <textarea id="msgText" style="width:100%;min-height:90px;padding:8px;border-radius:8px;border:1px solid #eef3ff"></textarea>
          <div style="display:flex;gap:8px;justify-content:flex-end">
            <button class="btn ghost" onclick="closeQuick()">Cancel</button>
            <button class="btn" onclick="sendMessage()">Send</button>
          </div>
        `);
      } else if (type === 'quick') {
        html = modalWrap(`
          <h3>Quick Actions</h3>
          <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-top:8px;">
            <button class="btn" onclick="openQuick('mark')">Mark Attendance</button>
            <button class="btn" onclick="openQuick('assign')">Create Assignment</button>
            <button class="btn" onclick="openQuick('message')">Message Parents</button>
            <button class="btn" onclick="openQuick('announce')">Post Announcement</button>
          </div>
          <div style="display:flex;justify-content:flex-end;margin-top:12px;"><button class="btn ghost" onclick="closeQuick()">Close</button></div>
        `);
      }

      root.innerHTML = html;
    }

    function modalWrap(inner){
      return `<div style="position:fixed;left:0;top:0;right:0;bottom:0;background:rgba(2,6,23,0.45);display:flex;align-items:center;justify-content:center;z-index:9999" onclick="closeQuick()">
        <div class="card" style="width:520px;max-width:92vw" onclick="event.stopPropagation()">
          ${inner}
        </div>
      </div>`;
    }

    function closeQuick(){
      document.getElementById('quickRoot').innerHTML = '';
    }

    function postAnnouncement(){
      const text = document.getElementById('announceText').value || '';
      if (!text.trim()) return showToast('Announcement cannot be empty');
      showToast('Announcement posted');
      closeQuick();
    }

    function createClass(){
      const name = document.getElementById('newClassName').value || 'New Class';
      const subject = document.getElementById('newClassSubject').value || 'Subject';
      classes.push({ id: 'c'+(classes.length+1), name, subject, students:0 });
      initUI();
      showToast('Class created: ' + name);
      closeQuick();
    }

    function createAssignment(){
      const title = document.getElementById('assignTitle').value || 'Untitled';
      const cls = document.getElementById('assignClass').value || 'Unknown';
      const due = document.getElementById('assignDue').value || 'TBD';
      assignments.push({ title, cls, due, status:'Open' });
      initUI();
      showToast('Assignment created');
      closeQuick();
    }

    function sendMessage(){
      const m = document.getElementById('msgText').value || '';
      if (!m.trim()) return showToast('Message is empty');
      showToast('Message sent to parents');
      closeQuick();
    }

    function markAllPresent(){
      showToast('All students marked present');
    }

    function uploadResource(e){
      const f = e.target.files[0];
      if (!f) return;
      const node = document.createElement('div');
      node.className = 'small muted';
      node.textContent = `${f.name} ‚Ä¢ uploaded`;
      document.getElementById('resourcesList').appendChild(node);
      showToast('Resource uploaded');
    }

    // Tiny toast util
    function showToast(msg, t=2000){
      const el = document.getElementById('toast');
      el.innerText = msg;
      el.style.display = 'block';
      setTimeout(()=> el.style.opacity = '1', 20);
      clearTimeout(el._timer);
      el._timer = setTimeout(()=> {
        el.style.opacity = '0';
        setTimeout(()=> el.style.display = 'none', 350);
      }, t);
    }

    // init
    window.addEventListener('load', ()=>{
      initUI();
      // default section: overview
      document.querySelectorAll('main .section').forEach(s=>s.style.display='none');
      document.getElementById('overview').style.display = '';
    });

  </script>
</body>
</html>
