<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Login — École des Roches</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Secure login for applicants and staff. Role-protected access and polished UI with accessible modals and toast notifications." />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

  <style>
    :root{
      --navy: #061728;
      --gold: #f6b83f;
      --bg: #f3f6f8;
      --card: #ffffff;
      --muted: #6b7280;
      --danger: #dc2626;
      --success: #16a34a;
      --radius: 12px;
      --max-width: 980px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      font-family:'Inter',system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      background: linear-gradient(180deg,#edf2f7, #e8eef6);
      color: #071224;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .page {
      max-width: var(--max-width);
      margin: 40px auto;
      padding: 24px;
    }

    .header{
      display:flex;
      align-items:center;
      gap:14px;
      margin-bottom:20px;
    }

    .logo {
      background:var(--gold);
      color:var(--navy);
      font-family:'Playfair Display',serif;
      font-weight:700;
      padding:10px 14px;
      border-radius:8px;
      font-size:20px;
    }

    .brand-meta {
      font-size:14px;
      color:var(--muted);
    }

    .auth-panel {
      display:grid;
      grid-template-columns: 1fr 360px;
      gap: 20px;
      align-items:start;
    }

    @media (max-width: 940px) {
      .auth-panel { grid-template-columns: 1fr; }
    }

    .card {
      background:var(--card);
      border-radius:var(--radius);
      padding:22px;
      box-shadow: 0 12px 40px rgba(2,11,24,0.06);
    }

    .login-card {
      max-width: 720px;
    }

    h1 {
      font-family:'Playfair Display',serif;
      font-size:22px;
      margin:0 0 8px 0;
    }

    p.lead { margin:0 0 18px 0; color:var(--muted); }

    form .grid {
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }

    @media (max-width:640px){ form .grid { grid-template-columns: 1fr; } }

    label { display:block; font-weight:600; font-size:13px; margin-bottom:6px; color:#071224 }
    input, select {
      width:100%; padding:10px 12px; border-radius:8px; border:1px solid #e7ecf3;
      background:#fff; font-size:14px;
    }

    .field { margin-bottom:12px; }

    .controls { display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-top:6px; }
    .btn { padding:10px 14px; border-radius:8px; border:0; cursor:pointer; font-weight:700; }
    .btn-primary { background:var(--navy); color:#fff; }
    .btn-ghost { background:transparent; border:1px solid rgba(2,11,24,0.06); color:var(--navy); }
    .btn-link { background:transparent; color:var(--navy); text-decoration:underline; padding:6px; border-radius:6px; }

    .muted { color:var(--muted); font-size:13px; }

    .remember { display:flex; align-items:center; gap:8px; font-size:14px; }

    .help {
      display:flex; flex-direction:column; gap:12px;
    }
    .help .note { font-size:14px; color:var(--muted) }
    .help .role-card { padding:12px; border-radius:10px; background:#fafcfe; border:1px solid rgba(2,11,24,0.03) }
    .help .role-card strong{display:block;margin-bottom:6px}
    .help .links { display:flex; gap:8px; margin-top:6px; flex-wrap:wrap }

    /* Modal (accessible) */
    .modal-backdrop {
      position:fixed; inset:0; background:rgba(2,11,24,0.48); display:none; align-items:center; justify-content:center; z-index:1200;
    }
    .modal-backdrop.open { display:flex; }

    .modal {
      width:100%; max-width:520px; background:var(--card); border-radius:12px; padding:18px; box-shadow:0 18px 44px rgba(2,11,24,0.26);
    }

    .modal h3 { margin:0 0 8px 0; font-family:'Playfair Display',serif; }
    .modal p.muted { color:var(--muted); margin-bottom:12px }

    .modal .actions { margin-top:14px; display:flex; gap:8px; justify-content:flex-end; }

    /* Toast system */
    .toast-wrap {
      position:fixed;
      right:18px;
      bottom:18px;
      display:flex;
      flex-direction:column;
      gap:10px;
      z-index:1400;
      width:320px;
      max-width: calc(100% - 36px);
    }

    .toast {
      background:#fff;
      border-radius:10px;
      padding:12px 14px;
      box-shadow:0 10px 30px rgba(2,11,24,0.12);
      display:flex;
      gap:12px;
      align-items:flex-start;
      border-left:4px solid #cbd5e1;
      animation:toastIn .18s ease;
    }
    .toast.success { border-left-color: var(--success); }
    .toast.error { border-left-color: var(--danger); }
    .toast .title { font-weight:700; margin-bottom:2px; }
    .toast .desc { color:var(--muted); font-size:13px; }
    .toast .close { margin-left:auto; background:transparent;border:0; cursor:pointer; color:var(--muted); font-weight:700 }

    @keyframes toastIn {
      from { transform: translateY(8px); opacity:0 }
      to { transform: translateY(0); opacity:1 }
    }

    .spinner {
      width:18px;height:18px;border-radius:50%;border:2px solid rgba(0,0,0,0.08);border-top-color:var(--navy);
      animation:spin .9s linear infinite;
    }
    @keyframes spin { to { transform:rotate(360deg) } }

    .sr-only { position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }
  </style>
</head>

<body>
  <main class="page" id="login-root">
    <header class="header">
      <div class="logo" aria-hidden="true">ER</div>
      <div>
        <div style="font-weight:700">École des Roches</div>
        <div class="brand-meta">Access portal (role-based)</div>
      </div>
    </header>

    <section class="auth-panel">
      <!-- Left: Login form -->
      <div class="card login-card" aria-labelledby="login-title">
        <h1 id="login-title">Sign in</h1>
        <p class="lead">Enter your credentials. Your role will determine which area of the site you can access.</p>

        <form id="login-form" novalidate>
          <div class="grid">
            <div class="field">
              <label for="email">Email</label>
              <input id="email" type="email" name="email" autocomplete="email" required />
            </div>

            <div class="field">
              <label for="role">Role</label>
              <select id="role" name="role" required>
                <option value="applicant">Applicant</option>
                <option value="admissions">Admissions</option>
                <option value="admin">Administrator</option>
              </select>
            </div>

            <div class="field" style="grid-column:1 / -1">
              <label for="password">Password</label>
              <input id="password" type="password" name="password" autocomplete="current-password" required />
            </div>

            <div class="field" style="grid-column:1 / 2">
              <label class="remember"><input id="remember" type="checkbox" /> Remember me</label>
            </div>

            <div class="field" style="grid-column:2 / 3; text-align:right">
              <button type="button" id="forgot-btn" class="btn btn-link" aria-haspopup="dialog">Forgot password?</button>
            </div>
          </div>

          <div class="controls" style="margin-top:12px">
            <button type="submit" class="btn btn-primary" id="login-btn">
              <span id="login-btn-text">Sign in</span>
              <span id="login-spinner" class="spinner" style="display:none;margin-left:8px"></span>
            </button>
            <button type="button" id="demo-btn" class="btn btn-ghost">Demo login</button>
            <div class="muted" style="margin-left:auto">Need an account? <a href="#" id="apply-link">Apply now</a></div>
          </div>
        </form>
      </div>

      <!-- Right: help / guidance -->
      <aside class="help" aria-hidden="true">
        <div class="card role-card">
          <strong>Role guidance</strong>
          <div class="muted">Select the role associated with your account to reach the appropriate area after sign-in.</div>
          <div class="links">
            <a class="pill" href="#">Reset password</a>
            <a class="pill" href="#">Contact support</a>
          </div>
        </div>

        <div class="card">
          <strong>Security notes</strong>
          <div class="muted">This portal uses standard authentication flows. Follow on-screen prompts for any additional verification steps.</div>
        </div>

        <div class="card">
          <strong>Two-step verification</strong>
          <div class="muted">Accounts with enhanced security will be prompted for a verification code as needed.</div>
        </div>
      </aside>
    </section>
  </main>

  <!-- Modal: Forgot password (generic) -->
  <div id="modal-backdrop" class="modal-backdrop" role="presentation" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-desc" tabindex="-1">
      <h3 id="modal-title">Reset password</h3>
      <p id="modal-desc" class="muted">Provide your email to receive reset instructions.</p>

      <div>
        <label for="reset-email">Email</label>
        <input id="reset-email" type="email" />
      </div>

      <div class="actions">
        <button id="modal-cancel" class="btn btn-ghost">Cancel</button>
        <button id="modal-send" class="btn btn-primary">Send</button>
      </div>
    </div>
  </div>

  <!-- Toast container (aria-live for screen readers) -->
  <div class="toast-wrap" aria-live="polite" aria-atomic="false" id="toast-wrap"></div>

  <script>
    // Lightweight, self-contained UI behavior:
    // - Accessible modals with focus trapping
    // - Toast notifications
    // - Form interactions are simulated on the client (replace with server calls in your integration)

    (function () {
      // Elements
      const loginForm = document.getElementById('login-form');
      const loginBtn = document.getElementById('login-btn');
      const loginBtnText = document.getElementById('login-btn-text');
      const loginSpinner = document.getElementById('login-spinner');
      const forgotBtn = document.getElementById('forgot-btn');
      const modalBackdrop = document.getElementById('modal-backdrop');
      const modalSend = document.getElementById('modal-send');
      const modalCancel = document.getElementById('modal-cancel');
      const resetEmail = document.getElementById('reset-email');
      const demoBtn = document.getElementById('demo-btn');
      const toastWrap = document.getElementById('toast-wrap');

      // Focus trap helpers
      function trapFocus(modal) {
        const focusable = modal.querySelectorAll('a[href], button:not([disabled]), input, select, textarea, [tabindex]:not([tabindex="-1"])');
        if (!focusable.length) return () => {};
        const first = focusable[0];
        const last = focusable[focusable.length - 1];
        function handle(e) {
          if (e.key === 'Tab') {
            if (e.shiftKey && document.activeElement === first) {
              e.preventDefault(); last.focus();
            } else if (!e.shiftKey && document.activeElement === last) {
              e.preventDefault(); first.focus();
            }
          } else if (e.key === 'Escape') {
            closeAllModals();
          }
        }
        document.addEventListener('keydown', handle);
        return () => document.removeEventListener('keydown', handle);
      }

      function openModal(backdrop) {
        backdrop.classList.add('open'); backdrop.setAttribute('aria-hidden', 'false');
        const modal = backdrop.querySelector('.modal');
        if (modal) {
          const previouslyFocused = document.activeElement;
          setTimeout(() => {
            const focusable = modal.querySelector('input,button,select,textarea,[tabindex]:not([tabindex="-1"])');
            if (focusable) focusable.focus();
          }, 60);
          const release = trapFocus(modal);
          modal._releaseFocus = release;
          modal._previous = previouslyFocused;
        }
      }

      function closeModal(backdrop) {
        backdrop.classList.remove('open'); backdrop.setAttribute('aria-hidden', 'true');
        const modal = backdrop.querySelector('.modal');
        if (modal && modal._releaseFocus) modal._releaseFocus();
        if (modal && modal._previous) {
          try { modal._previous.focus(); } catch (e) {}
        }
      }

      function closeAllModals() { closeModal(modalBackdrop); }

      // Toasts
      function showToast({ title = '', message = '', type = 'success', duration = 5000 } = {}) {
        const t = document.createElement('div');
        t.className = 'toast ' + (type === 'error' ? 'error' : 'success');
        t.setAttribute('role', 'status');
        t.setAttribute('aria-live', 'polite');

        t.innerHTML = `
          <div style="flex:1">
            <div class="title">${escapeHtml(title)}</div>
            <div class="desc">${escapeHtml(message)}</div>
          </div>
          <button class="close" aria-label="Dismiss toast">&times;</button>
        `;

        const closeBtn = t.querySelector('.close');
        closeBtn.addEventListener('click', () => removeToast(t));

        let timer = setTimeout(() => removeToast(t), duration);
        t.addEventListener('mouseenter', () => clearTimeout(timer));
        t.addEventListener('mouseleave', () => timer = setTimeout(() => removeToast(t), duration));

        toastWrap.appendChild(t);
        return {
          dismiss: () => removeToast(t)
        };
      }

      function removeToast(node) {
        if (!node) return;
        node.style.opacity = '0';
        setTimeout(() => { try { node.parentNode && node.parentNode.removeChild(node); } catch (e) {} }, 220);
      }

      function escapeHtml(s) {
        if (!s) return '';
        return String(s).replace(/[&<>"']/g, function (m) {
          return ({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' })[m];
        });
      }

      // Modal interactions
      forgotBtn.addEventListener('click', () => openModal(modalBackdrop));
      modalCancel.addEventListener('click', () => closeModal(modalBackdrop));
      modalBackdrop.addEventListener('click', (e) => { if (e.target === modalBackdrop) closeModal(modalBackdrop); });
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeAllModals(); });

      modalSend.addEventListener('click', () => {
        const email = resetEmail.value.trim();
        if (!email) { showToast({ title:'Email required', message:'Please enter your email address.', type:'error' }); resetEmail.focus(); return; }
        modalSend.disabled = true;
        modalSend.textContent = 'Sending...';

        // Simulated behavior — replace with real integration in your application
        setTimeout(() => {
          modalSend.disabled = false;
          modalSend.textContent = 'Send';
          closeModal(modalBackdrop);
          showToast({ title:'Email queued', message:'If an account exists for that address, instructions will be sent shortly.' });
          resetEmail.value = '';
        }, 900);
      });

      // Demo login quick-fill
      demoBtn.addEventListener('click', () => {
        document.getElementById('email').value = 'demo.user@example.com';
        document.getElementById('password').value = 'Password123!';
        document.getElementById('role').value = 'applicant';
        showToast({ title:'Demo', message:'Fields populated for demonstration purposes.', type:'success', duration:2200 });
      });

      // Login submission (simulated)
      loginForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value;
        const role = document.getElementById('role').value;

        if (!email || !password) {
          showToast({ title:'Missing details', message:'Please provide both email and password.', type:'error' });
          return;
        }

        // UI feedback
        loginBtn.disabled = true;
        loginSpinner.style.display = 'inline-block';
        loginBtnText.textContent = 'Signing in';

        // Simulated server response (replace with actual call during integration)
        setTimeout(() => {
          loginBtn.disabled = false;
          loginSpinner.style.display = 'none';
          loginBtnText.textContent = 'Sign in';

          // Simulated success
          const ok = true; // toggle to simulate success/failure
          if (ok) {
            showToast({ title:'Signed in', message: 'Redirecting to your dashboard...', type:'success', duration:1500 });
            // Generic redirect — integrate with your routing
            setTimeout(() => {
              // Example redirect: include role as a query parameter for demo
              window.location.href = '/dashboard?role=' + encodeURIComponent(role);
            }, 900);
          } else {
            showToast({ title:'Sign-in failed', message: 'Invalid credentials. Please try again.', type:'error' });
          }
        }, 900);
      });

    })();
  </script>
</body>
</html>
