<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Results ‚Ä¢ ExamGuard ‚Äî Student</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css?family=Inter:400,600,700&display=swap" rel="stylesheet">
  <link rel="icon" href="../logo.png">
  <style>
    :root{
      --bg-0:#f6f8ff; --bg-1:#eef2ff;
      --accent:#3b82f6; --accent-2:#6366f1; --muted:#6b7280;
      --card-bg:#ffffff; --radius:12px;
      --sidebar-w:280px;
      --glass: rgba(255,255,255,0.7);
      --success: #10b981;
      --danger: #ef4444;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial;background:linear-gradient(180deg,var(--bg-0),var(--bg-1));-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#0b2a44}
    a{color:inherit;text-decoration:none}

    /* Layout */
    .app{display:flex;min-height:100vh;align-items:stretch}
    .sidebar{
      width:var(--sidebar-w); min-width:var(--sidebar-w);
      background:linear-gradient(180deg,#0f172a 0%, #1e3a8a 100%);
      color:#fff;padding:22px 18px;position:fixed;left:0;top:0;bottom:0;z-index:100;
      display:flex;flex-direction:column;gap:16px;overflow-y:auto;border-right:1px solid rgba(255,255,255,0.04)
    }
    .brand{display:flex;gap:12px;align-items:center}
    .brand img{width:44px;height:44px;border-radius:10px;object-fit:cover;border:2px solid rgba(255,224,102,0.12);background:#fff}
    .brand .title{font-weight:800;color:#ffe066}
    .nav{display:flex;flex-direction:column;gap:8px;margin-top:6px}
    .nav a{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:9px;font-weight:700;background:transparent;color:#e6eefc}
    .nav a.active,.nav a:hover{background:rgba(255,255,255,0.04);color:#ffe066;transform:translateX(4px)}
    .profile{display:flex;gap:12px;align-items:center;padding-top:10px;border-top:1px solid rgba(255,255,255,0.04)}
    .profile img{width:44px;height:44px;border-radius:10px;object-fit:cover;border:2px solid #ffe066}

    /* Topbar */
    .topbar{
      position:fixed; left:var(--sidebar-w); top:0; width:calc(100vw - var(--sidebar-w)); z-index:90;
      display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 18px;
      backdrop-filter: blur(6px); background: rgba(255,255,255,0.85); border-bottom:1px solid rgba(11,42,60,0.06);
      box-shadow:0 6px 18px rgba(11,42,60,0.04); min-height:64px;
    }
    .hamburger{display:none;background:var(--accent);color:#fff;border:none;padding:9px 12px;border-radius:10px;cursor:pointer;font-weight:800}
    .page-title{font-weight:800;font-size:1.14rem;color:var(--accent-2)}
    .topbar .actions{display:flex;gap:10px;align-items:center}

    /* Main */
    .main{margin-left:var(--sidebar-w);padding:24px;flex:1;padding-top:110px;min-height:100vh}
    .container{max-width:1200px;margin:0 auto}

    /* Grid & cards */
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px;align-items:start}
    .card{background:var(--card-bg);border-radius:var(--radius);padding:14px;border:1px solid rgba(11,42,60,0.04);box-shadow:0 10px 30px rgba(11,42,60,0.03)}
    .col-3{grid-column:span 3}.col-4{grid-column:span 4}.col-6{grid-column:span 6}.col-9{grid-column:span 9}.col-12{grid-column:1 / -1}

    /* Filters area */
    .filters{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
    .field{display:flex;flex-direction:column;gap:6px}
    .field label{font-size:0.85rem;font-weight:700;color:var(--muted)}
    .field input,.field select{padding:10px 12px;border-radius:8px;border:1px solid #e6e9ef;font-size:0.95rem}
    .btn{padding:10px 12px;border-radius:10px;border:0;cursor:pointer;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff;font-weight:700}
    .btn.ghost{background:transparent;color:var(--accent-2);border:1px solid rgba(59,130,246,0.08)}
    .btn.small{padding:8px 10px;font-size:0.95rem}
    .muted{color:var(--muted)}

    /* KPI */
    .kpis{display:flex;gap:12px;align-items:stretch}
    .kpi{flex:1;padding:12px;border-radius:10px;background:linear-gradient(180deg,#fff,#fbfdff);display:flex;flex-direction:column;gap:8px;align-items:flex-start}
    .kpi .num{font-size:1.5rem;font-weight:900;color:var(--accent-2)}
    .kpi .label{font-size:0.9rem;color:var(--muted);font-weight:700}

    /* Results table */
    .results-table{width:100%;border-collapse:collapse;margin-top:8px}
    .results-table th,.results-table td{padding:10px;border-bottom:1px solid #f1f5ff;text-align:left;font-size:0.95rem}
    .results-table th{font-weight:800;background:#fbfdff}
    .grade-pill{display:inline-block;padding:6px 10px;border-radius:999px;font-weight:800;color:#fff;font-size:0.9rem}
    .grade-A{background:linear-gradient(90deg,#10b981,#059669)} .grade-B{background:linear-gradient(90deg,#f59e0b,#f97316)} .grade-C{background:linear-gradient(90deg,#f97316,#ef4444)} .grade-D{background:#9ca3af}

    /* Subject cards */
    .subject-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;margin-top:12px}
    .subject{padding:12px;border-radius:10px;background:#fff;border:1px solid #eef3ff;display:flex;flex-direction:column;gap:6px}
    .subject .sub-title{font-weight:800;color:#0b2a44}
    .subject .meta{color:var(--muted);font-size:0.9rem}

    /* Footer actions */
    .actions-row{display:flex;gap:10px;justify-content:flex-end;margin-top:10px}

    /* Resource / note box */
    .note{padding:12px;border-radius:10px;background:linear-gradient(90deg,#fff,#fbfdff);border-left:4px solid var(--accent)}

    /* Responsive */
    @media (max-width: 980px){
      .grid{grid-template-columns:repeat(6,1fr)}
      .col-3{grid-column:span 3}.col-4{grid-column:span 6}.col-6{grid-column:span 6}.col-9{grid-column:span 6}
      .hamburger{display:inline-flex}
      .topbar{left:0;width:100vw}
      .sidebar{position:fixed;transform:translateX(-110%);transition:transform .22s ease}
      .sidebar.open{transform:translateX(0);box-shadow:0 20px 60px rgba(2,6,23,0.5)}
      .main{margin-left:0;padding-top:90px}
    }
    @media (max-width:720px){
      .subject-grid{grid-template-columns:repeat(2,1fr)}
      .kpis{flex-direction:column}
      .brand .title{font-size:0.96rem}
    }
  </style>
</head>
<body>
  <div class="app" id="app">
    <!-- Sidebar -->
    <aside class="sidebar open" id="sidebar" aria-label="Main navigation">
      <div class="brand" aria-hidden="false">
        <img src="../logo.png" alt="Logo">
        <div>
          <div class="title">ExamGuard</div>
          <div class="muted" style="font-weight:700">Central Result Portal</div>
        </div>
      </div>

      <nav class="nav" aria-label="Primary">
        <a href="student.html">üè† Dashboard</a>
        <a href="#" class="active">üìÑ Results</a>
        <a href="student.html#timetable">‚è∞ Timetable</a>
        <a href="student.html#resources">üìÇ Resources</a>
        <a href="student.html#messages">‚úâÔ∏è Messages</a>
        <a href="student.html#settings">‚öôÔ∏è Settings</a>
      </nav>

      <div style="flex:1"></div>

      <div class="profile" role="region" aria-label="Student profile">
        <img src="../avatar.jpg" alt="Student avatar">
        <div>
          <div class="name" id="sidebarName">Adaobi Chukwu</div>
          <div class="muted" id="sidebarClass">SS2 ‚Äî Biology</div>
        </div>
      </div>
    </aside>

    <!-- Topbar -->
    <div class="topbar" id="topbar">
      <div style="display:flex;gap:12px;align-items:center">
        <button class="hamburger" id="hamburger" aria-label="Toggle menu">‚ò∞</button>
        <div>
          <div class="page-title" id="pageTitle">Central Result Portal</div>
          <div class="muted" style="font-size:0.92rem">Search results quickly ‚Äî printable & exportable</div>
        </div>
      </div>

      <div class="actions">
        <div style="display:flex;gap:8px;align-items:center">
          <img src="../avatar.jpg" alt="You" style="width:44px;height:44px;border-radius:8px;object-fit:cover;border:2px solid #fff">
        </div>
      </div>
    </div>

    <!-- Main -->
    <main class="main" id="main" role="main" tabindex="-1">
      <div class="container">
        <!-- Filters card -->
        <div class="card col-12" style="display:flex;flex-direction:column;gap:12px;margin-bottom:14px">
          <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;">
            <div style="font-weight:800">Search / Lookup Results</div>
            <div class="muted">Find students by registration, session, term and class</div>
          </div>

          <div class="filters" role="search" aria-label="Search results">
            <div class="field" style="min-width:220px">
              <label for="regNo">Registration No</label>
              <input id="regNo" placeholder="e.g. EXM/2025/001" />
            </div>

            <div class="field">
              <label for="session">Session</label>
              <select id="session">
                <option value="2024/2025">2024/2025</option>
                <option value="2023/2024">2023/2024</option>
                <option value="2022/2023">2022/2023</option>
              </select>
            </div>

            <div class="field">
              <label for="term">Term</label>
              <select id="term">
                <option>First</option>
                <option>Second</option>
                <option>Third</option>
              </select>
            </div>

            <div class="field">
              <label for="classSel">Class</label>
              <select id="classSel">
                <option>SS2</option>
                <option>SS1</option>
                <option>SS3</option>
              </select>
            </div>

            <div style="display:flex;gap:8px;align-items:end;margin-left:auto">
              <button class="btn small" id="searchBtn">Search</button>
              <button class="btn ghost small" id="clearBtn">Clear</button>
            </div>
          </div>
        </div>

        <!-- Results header + KPIs -->
        <div class="grid" style="margin-bottom:12px;align-items:start">
          <div class="card col-9">
            <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;">
              <div>
                <div style="font-weight:900;font-size:1.04rem" id="resultStudentName">--</div>
                <div class="muted" id="resultStudentMeta">Registration ‚Ä¢ Class ‚Ä¢ Session</div>
              </div>
              <div style="text-align:right">
                <div class="muted">Result status</div>
                <div style="font-weight:900;color:var(--accent-2);font-size:1.2rem" id="resultStatus">‚Äî</div>
              </div>
            </div>

            <div style="margin-top:12px" class="kpis">
              <div class="kpi">
                <div class="label">Cumulative Average</div>
                <div class="num" id="kpiAvg">--%</div>
                <div class="muted">Position in class: <strong id="kpiRank">--</strong></div>
              </div>
              <div class="kpi">
                <div class="label">Total Subjects</div>
                <div class="num" id="kpiSubjects">--</div>
                <div class="muted">Passed: <strong id="kpiPassed">--</strong></div>
              </div>
              <div class="kpi">
                <div class="label">Attendance</div>
                <div class="num" id="kpiAtt">--%</div>
                <div class="muted">Days attended: <strong id="kpiDays">--</strong></div>
              </div>
            </div>
          </div>

          <div class="card col-3">
            <div style="display:flex;flex-direction:column;gap:10px">
              <div style="font-weight:800">Export / Print</div>
              <div class="muted" style="font-size:0.95rem">Create a printable report or export CSV</div>
              <div style="display:flex;gap:8px;flex-direction:column;margin-top:8px">
                <button class="btn" id="printBtn">Print Report</button>
                <button class="btn ghost" id="exportBtn">Export CSV</button>
                <button class="btn ghost" id="downloadPdfBtn">Download PDF</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Score breakdown and subjects -->
        <div class="grid">
          <div class="card col-9">
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <div style="font-weight:800">Subject Breakdown</div>
              <div class="muted">Detailed scores & remarks</div>
            </div>

            <table class="results-table" id="resultsTable" aria-live="polite">
              <thead>
                <tr>
                  <th>Subject</th>
                  <th>CA</th>
                  <th>Exam</th>
                  <th>Total</th>
                  <th>Grade</th>
                  <th>Remark</th>
                </tr>
              </thead>
              <tbody>
                <!-- rows populated by JS -->
              </tbody>
            </table>

            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
              <div class="note">
                <div style="font-weight:800">Teacher comment</div>
                <div id="teacherComment" class="muted" style="margin-top:6px">‚Äî</div>
              </div>

              <div style="display:flex;flex-direction:column;gap:6px;align-items:flex-end">
                <div class="muted">Overall Grade</div>
                <div style="font-weight:900;font-size:1.6rem;color:var(--accent-2)" id="overallGrade">‚Äî</div>
                <div class="muted">CGPA: <strong id="overallGPA">--</strong></div>
              </div>
            </div>
          </div>

          <div class="card col-3">
            <div style="font-weight:800">Quick Snapshot</div>

            <div style="margin-top:10px;display:flex;flex-direction:column;gap:8px">
              <div style="display:flex;justify-content:space-between"><div class="muted">Highest score</div><div id="snapHigh">--</div></div>
              <div style="display:flex;justify-content:space-between"><div class="muted">Lowest score</div><div id="snapLow">--</div></div>
              <div style="display:flex;justify-content:space-between"><div class="muted">No. of A's</div><div id="snapA">--</div></div>
              <div style="display:flex;justify-content:space-between"><div class="muted">No. of F's</div><div id="snapF">--</div></div>
              <div style="margin-top:8px"><button class="btn small" onclick="scrollToTable()">View full</button></div>
            </div>

            <div style="margin-top:12px">
              <div style="font-weight:800">Previous Semesters</div>
              <div style="display:flex;flex-direction:column;gap:8px;margin-top:8px">
                <button class="btn ghost small">Second Semester</button>
                <button class="btn ghost small">First Semester 2025</button>
                <button class="btn ghost small">Third Term 2024</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Subjects cards -->
        <div class="card col-12" style="margin-top:14px">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div style="font-weight:800">Subjects / Quick details</div>
            <div class="muted">Tap a subject for breakdown</div>
          </div>

          <div class="subject-grid" id="subjectGrid" style="margin-top:12px">
            <!-- populated via JS -->
          </div>
        </div>

        <!-- Notes / footer -->
        <div style="height:18px"></div>
      </div>
    </main>
  </div>

  <script>
    // Sample data for demo. Replace with real API calls as needed.
    const sampleResult = {
      regNo: 'EXM/2025/001',
      name: 'Adaobi Chukwu',
      class: 'SS2',
      session: '2024/2025',
      term: 'First',
      status: 'Published',
      attendance: 92,
      days: 120,
      gpa: 3.8,
      overallGrade: 'A',
      avgPercent: 86,
      rank: '3 / 45',
      teacherComment: 'Excellent performance. Keep up the consistent effort.',
      subjects: [
        { name: 'Mathematics', ca: 18, exam: 72, total: 90, grade: 'A', remark: 'Excellent' },
        { name: 'English', ca: 15, exam: 64, total: 79, grade: 'B', remark: 'Good' },
        { name: 'Biology', ca: 17, exam: 68, total: 85, grade: 'A', remark: 'Very good' },
        { name: 'Chemistry', ca: 14, exam: 58, total: 72, grade: 'B', remark: 'Good' },
        { name: 'Physics', ca: 12, exam: 50, total: 62, grade: 'C', remark: 'Satisfactory' },
        { name: 'Civic', ca: 16, exam: 70, total: 86, grade: 'A', remark: 'Excellent' }
      ]
    };

    // UI elements
    const regNoEl = document.getElementById('regNo');
    const sessionEl = document.getElementById('session');
    const termEl = document.getElementById('term');
    const classEl = document.getElementById('classSel');
    const searchBtn = document.getElementById('searchBtn');
    const clearBtn = document.getElementById('clearBtn');

    const resultStudentName = document.getElementById('resultStudentName');
    const resultStudentMeta = document.getElementById('resultStudentMeta');
    const resultStatus = document.getElementById('resultStatus');
    const kpiAvg = document.getElementById('kpiAvg');
    const kpiRank = document.getElementById('kpiRank');
    const kpiSubjects = document.getElementById('kpiSubjects');
    const kpiPassed = document.getElementById('kpiPassed');
    const kpiAtt = document.getElementById('kpiAtt');
    const kpiDays = document.getElementById('kpiDays');

    const resultsTableBody = document.querySelector('#resultsTable tbody');
    const overallGradeEl = document.getElementById('overallGrade');
    const overallGPAEl = document.getElementById('overallGPA');
    const teacherComment = document.getElementById('teacherComment');
    const snapHigh = document.getElementById('snapHigh');
    const snapLow = document.getElementById('snapLow');
    const snapA = document.getElementById('snapA');
    const snapF = document.getElementById('snapF');
    const subjectGrid = document.getElementById('subjectGrid');

    // Sidebar toggle (mobile)
    const sidebar = document.getElementById('sidebar');
    const hamburger = document.getElementById('hamburger');
    hamburger.addEventListener('click', () => {
      sidebar.classList.toggle('open');
    });

    // Helpers
    function gradeClass(grade){
      if(grade==='A') return 'grade-A';
      if(grade==='B') return 'grade-B';
      if(grade==='C') return 'grade-C';
      return 'grade-D';
    }

    function populate(result){
      // Header
      resultStudentName.textContent = result.name;
      resultStudentMeta.textContent = `${result.regNo} ‚Ä¢ ${result.class} ‚Ä¢ ${result.session} ‚Äî ${result.term} term`;
      resultStatus.textContent = result.status;

      // KPIs
      kpiAvg.textContent = result.avgPercent + '%';
      kpiRank.textContent = result.rank;
      kpiSubjects.textContent = result.subjects.length;
      kpiPassed.textContent = result.subjects.filter(s => s.total >= 50).length;
      kpiAtt.textContent = result.attendance + '%';
      kpiDays.textContent = result.days;

      // Table
      resultsTableBody.innerHTML = '';
      let high = -Infinity, low = Infinity, countA=0, countF=0;
      result.subjects.forEach(s => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td style="font-weight:700">${s.name}</td>
          <td>${s.ca}</td>
          <td>${s.exam}</td>
          <td>${s.total}</td>
          <td><span class="grade-pill ${gradeClass(s.grade)}">${s.grade}</span></td>
          <td class="muted">${s.remark}</td>
        `;
        resultsTableBody.appendChild(tr);

        high = Math.max(high, s.total);
        low = Math.min(low, s.total);
        if(s.grade === 'A') countA++;
        if(s.grade === 'F') countF++;
      });

      overallGradeEl.textContent = result.overallGrade;
      overallGPAEl.textContent = result.gpa;
      teacherComment.textContent = result.teacherComment;
      snapHigh.textContent = high === -Infinity ? '--' : high;
      snapLow.textContent = low === Infinity ? '--' : low;
      snapA.textContent = countA;
      snapF.textContent = countF;

      // subjects cards
      subjectGrid.innerHTML = '';
      result.subjects.forEach(s => {
        const div = document.createElement('div');
        div.className = 'subject';
        div.innerHTML = `
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div class="sub-title">${s.name}</div>
            <div class="meta">${s.total}%</div>
          </div>
          <div class="meta">CA: ${s.ca} ‚Ä¢ Exam: ${s.exam}</div>
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div><span class="grade-pill ${gradeClass(s.grade)}">${s.grade}</span></div>
            <div class="muted">${s.remark}</div>
          </div>
        `;
        div.tabIndex = 0;
        div.addEventListener('click', ()=>{ alert(`${s.name}: ${s.total} - ${s.remark}`) });
        subjectGrid.appendChild(div);
      });
    }

    // Export CSV
    function exportCSV(result){
      const rows = [
        ['RegNo','Name','Class','Session','Term','Subject','CA','Exam','Total','Grade','Remark']
      ];
      result.subjects.forEach(s => {
        rows.push([result.regNo,result.name,result.class,result.session,result.term,s.name,s.ca,s.exam,s.total,s.grade,s.remark]);
      });
      const csv = rows.map(r => r.map(c => `"${String(c).replace(/"/g,'""')}"`).join(',')).join('\n');
      const blob = new Blob([csv],{type:'text/csv;charset=utf-8;'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `${result.regNo || 'result'}.csv`;
      a.click();
      URL.revokeObjectURL(url);
    }

    // Print
    function printReport(){
      window.print();
    }

    // Wire buttons
    searchBtn.addEventListener('click', (e)=>{
      // In production replace with an API lookup using regNoEl.value, sessionEl.value, classEl.value, termEl.value
      // For demo we just show sampleResult and populate regNo if provided
      const queryReg = regNoEl.value.trim();
      if(queryReg) sampleResult.regNo = queryReg;
      populate(sampleResult);
      // ensure scrolled to result
      document.getElementById('main').scrollIntoView({behavior:'smooth'});
    });

    clearBtn.addEventListener('click', ()=> {
      regNoEl.value=''; sessionEl.selectedIndex=0; termEl.selectedIndex=0; classEl.selectedIndex=0;
      // clear UI
      resultsTableBody.innerHTML = '';
      resultStudentName.textContent='--';
      resultStudentMeta.textContent='Registration ‚Ä¢ Class ‚Ä¢ Session';
      resultStatus.textContent='‚Äî';
      kpiAvg.textContent='--%';
      kpiRank.textContent='--';
      kpiSubjects.textContent='--';
      kpiPassed.textContent='--';
      kpiAtt.textContent='--%';
      kpiDays.textContent='--';
      subjectGrid.innerHTML='';
      overallGradeEl.textContent='‚Äî';
      overallGPAEl.textContent='--';
      teacherComment.textContent='‚Äî';
      snapHigh.textContent='--';
      snapLow.textContent='--';
      snapA.textContent='--';
      snapF.textContent='--';
    });

    document.getElementById('exportBtn').addEventListener('click', ()=> exportCSV(sampleResult));
    document.getElementById('printBtn').addEventListener('click', printReport);
    document.getElementById('downloadPdfBtn').addEventListener('click', ()=> {
      // Basic fallback: call print -> user can choose Save as PDF
      printReport();
    });

    function scrollToTable(){ document.querySelector('#resultsTable').scrollIntoView({behavior:'smooth'}); }

    // Init (pre-populate with sample for immediate feedback)
    populate(sampleResult);
  </script>
</body>
</html>
