
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Student Dashboard | ExamGuard (Responsive)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css?family=Inter:400,600,700&display=swap" rel="stylesheet">
  <link rel="icon" href="logo.png">
  <style>
    :root{
      --bg-0:#f6f8ff; --bg-1:#eef2ff;
      --accent:#3b82f6; --accent-2:#6366f1; --muted:#6b7280;
      --card-bg:#ffffff; --radius:12px;
      --sidebar-w:300px;
    }
    * { box-sizing: border-box; }
    html,body { height:100%; margin:0; font-family:Inter,system-ui,Arial; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; background:linear-gradient(180deg,var(--bg-0),var(--bg-1)); color:#0f172a; }
    a { color:inherit; text-decoration:none; }

    /* App layout */
    .app { display:flex; min-height:100vh; align-items:stretch; }
    /* Overlay to intercept taps on mobile when sidebar is open */
    .overlay { position:fixed; inset:0; background:rgba(2,6,23,0.45); z-index:50; display:none; }
    .overlay.visible { display:block; }

    /* Sidebar */
    .sidebar {
      width: var(--sidebar-w);
      min-width: var(--sidebar-w);
      background: linear-gradient(180deg,#0f172a 0%, #1e3a8a 100%);
      color:#fff; padding:20px 16px; position:fixed; left:0; top:0; bottom:0; z-index:100;
      box-shadow: 4px 0 28px rgba(15,23,42,0.12);
      transform: translateX(0); transition: transform .28s ease;
      display:flex; flex-direction:column; gap:14px; overflow-y:auto;
      -webkit-overflow-scrolling: touch;
      will-change: transform;
    }
    /* Hidden (mobile closed) */
    .sidebar.hidden { transform: translateX(-110%); }
    /* Open (mobile) */
    .sidebar.open { transform: translateX(0); }

    /* Brand / larger text */
    .brand { display:flex; gap:12px; align-items:center; }
    .brand img { width:48px; height:48px; border-radius:10px; object-fit:cover; border:3px solid rgba(255,224,102,0.12); background:#fff; }
    .brand .title { font-weight:700; font-size:1.18rem; color:#ffe066; }
    .brand .subtitle { font-size:0.96rem; color:rgba(255,255,255,0.9); }

    /* Nav - increased font size & spacing for tap targets */
    .nav { display:flex; flex-direction:column; gap:8px; margin-top:6px; }
    .nav a {
      display:flex; align-items:center; gap:10px; padding:12px 12px; border-radius:10px;
      font-weight:700; font-size:1.05rem; color:#e6eefc; background:transparent;
      transition: background .12s, transform .08s;
      touch-action: manipulation;
    }
    .nav a.active, .nav a:hover { background: rgba(255,255,255,0.04); color:#ffe066; transform: translateX(3px); }

    .spacer { flex:1; }

    .profile { display:flex; gap:12px; align-items:center; padding-top:10px; border-top:1px solid rgba(255,255,255,0.04); }
    .profile img { width:48px; height:48px; border-radius:10px; object-fit:cover; border:2px solid #ffe066; }

    /* Main area */
    .main { margin-left: var(--sidebar-w); padding:20px; flex:1; transition: margin-left .28s; min-height:100vh; overflow-y:auto; -webkit-overflow-scrolling:touch; }
    .main.full { margin-left:0; }

    .topbar { display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:14px; }
    .hamburger { display:none; background:var(--accent); color:#fff; border:none; padding:9px 12px; border-radius:10px; cursor:pointer; font-weight:800; font-size:1.05rem; }

    .page-title { font-weight:800; font-size:1.18rem; color:var(--accent-2); }
    .small { font-size:0.92rem; color:var(--muted); }

    /* Grid & cards */
    .grid { display:grid; grid-template-columns: repeat(12, 1fr); gap:14px; align-items:start; }
    .card { background:var(--card-bg); border-radius:12px; padding:14px; box-shadow: 0 8px 20px rgba(11,42,60,0.04); border:1px solid rgba(11,42,60,0.03); }
    .col-4 { grid-column: span 4; } .col-8 { grid-column: span 8; } .col-6 { grid-column: span 6; } .col-12 { grid-column: 1 / -1; }

    /* Student widgets */
    .progress { display:flex; gap:14px; align-items:center; }
    .circle { width:96px; height:96px; border-radius:50%; background:conic-gradient(var(--accent) 70%, #eef2ff 0%); display:grid; place-items:center; font-weight:800; font-size:1.05rem; color:var(--accent-2); }
    .kpis { display:flex; gap:10px; }

    /* Assignments list */
    .assignments .item { display:flex; justify-content:space-between; gap:12px; padding:10px; border-radius:8px; background:#fff; border:1px solid #eef3ff; margin-bottom:8px; align-items:center; }

    /* Messages */
    .messages { display:flex; gap:12px; }
    .conversations { width:260px; max-width:36%; min-width:200px; }
    .chat { flex:1; min-height:200px; border-radius:10px; overflow:auto; border:1px solid #eef3ff; background:#fff; padding:10px; }

    /* ------------------------
       FOUR-LINK CARD GRID (SQUARE 2x2 on small screens)
       ------------------------ */
    .link-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
      margin: 12px 0;
      align-items: stretch;
      grid-auto-rows: 1fr; /* make rows equal height automatically */
    }
    .link-card {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      padding: 14px;
      border-radius: 12px;
      background: #fff;
      border: 1px solid #eef3ff;
      text-align: center;
      transition: transform .12s ease, box-shadow .12s ease;
      cursor: pointer;
      min-height: 110px;
      justify-content: center;
      height: 100%;
    }
    .link-card:focus,
    .link-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 32px rgba(59,130,246,0.08);
      outline: none;
    }
    .link-card .icon {
      width:56px;
      height:56px;
      border-radius: 10px;
      display: grid;
      place-items: center;
      color: #fff;
      font-size: 22px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      box-shadow: 0 6px 18px rgba(59,130,246,0.08);
    }
    .link-card .title {
      font-weight:800;
      color:#0b2a44;
      font-size: 0.98rem;
    }
    .link-card .subtitle {
      font-size:0.88rem;
      color:var(--muted);
    }

    /* Responsive rules */
    @media (max-width: 980px) {
      .link-grid { grid-template-columns: repeat(2, 1fr); } /* tablet: 2 columns */
      .grid { grid-template-columns: repeat(6, 1fr); }
      .col-4 { grid-column: span 3; } .col-8 { grid-column: span 6; } .col-6 { grid-column: span 3; }
      .hamburger { display:inline-flex; }
    }
    /* IMPORTANT: fixed 2x2 on all small screens (<=720px) */
    @media (max-width: 720px) {
      :root { --sidebar-w: 86vw; } /* sidebar becomes overlay width */
      .sidebar { transform: translateX(-110%); position:fixed; width:var(--sidebar-w); min-width:var(--sidebar-w); }
      .sidebar.open { transform: translateX(0); box-shadow: 0 24px 48px rgba(2,6,23,0.5); }
      .sidebar.hidden { transform: translateX(-110%); }
      .overlay { display:none; } /* shown via JS only when open */
      .overlay.visible { display:block; }
      /* Prevent page scroll when sidebar modal is open - controlled in JS by adding body.no-scroll */
      body.no-scroll { overflow:hidden; height:100vh; touch-action:none; }
      .main { margin-left: 0; padding:14px; margin-top: 10}
      .nav a { padding:14px 14px; font-size:1.08rem; }
      .conversations { display:none; } /* simplify messages on small screens */
      .grid { grid-template-columns: 1fr; }
      .col-4, .col-8, .col-6, .col-12 { grid-column: auto; }

      /* Fixed 2x2 layout: ALWAYS use 2 columns on small screens */
      .link-grid {
        grid-template-columns: repeat(2, 1fr);
        grid-auto-rows: minmax(100px, 1fr); /* ensure balanced cells, taller if needed */
      }
      /* ensure cards fill their cell */
      .link-card { height: 100%; min-height: 100px; }
    }
/* Replace all .topbar rules with these, and ensure nothing inside <main> is sticky anymore */
.topbar {
  position: fixed;
  left: var(--sidebar-w);
  top: 0;
  width: calc(100vw - var(--sidebar-w));
  z-index: 90; /* higher than sidebar/content */
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 14px;
  backdrop-filter: blur(6px);
  background: rgba(255, 255, 255, 0.86);
  border-bottom: 1px solid rgba(11, 42, 60, 0.06);
  box-shadow: 0 6px 18px rgba(11, 42, 60, 0.04);
  min-height: 64px;
}

/* On mobile (sidebar overlays, not aside, so bar starts at left 0) */
@media (max-width: 720px) {
  .topbar {
    left: 0;
    width: 100vw;
    padding: 10px 12px;
    min-height: 56px;
  }
}

/* Add top padding/margin to .main to prevent content hiding under fixed bar */
.main {
  margin-left: var(--sidebar-w);
  padding: 20px;
  flex: 1;
  transition: margin-left .28s;
  min-height: 100vh;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  padding-top: 76px; /* = .topbar min-height + space (64px+12px) */
}
@media (max-width: 720px) {
  .main {
    margin-left: 0;
    padding: 14px;
    padding-top: 68px; /* = .topbar min-height + small pad (56px+12px) */
  }
}
    /* Small helper classes */
    .muted { color:var(--muted); }
    .btn { padding:10px 12px; border-radius:10px; border:none; cursor:pointer; background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#fff; font-weight:700; }
    .btn.ghost { background:transparent; color:var(--accent-2); border:1px solid rgba(59,130,246,0.08); }

    /* Accessibility focus */
    .nav a:focus { outline: 3px solid rgba(99,102,241,0.18); outline-offset: 3px; border-radius:8px; }
    .link-card:focus { outline: 3px solid rgba(99,102,241,0.12); outline-offset: 3px; }
  </style>
</head>
<body>
  <div class="app" id="app">
    <div class="overlay" id="overlay" aria-hidden="true"></div>

    <!-- Sidebar -->
    <aside class="sidebar hidden" id="sidebar" aria-label="Main navigation" role="navigation">
      <div class="brand" aria-hidden="false">
        <img src="logo.png" alt="Logo">
        <div>
          <div class="title">Student Portal</div>
          <div class="subtitle">Sunrise High ‚Ä¢ Student</div>
        </div>
      </div>

      <nav class="nav" id="nav" aria-label="Primary">
        <a href="#" data-section="home" class="active" onclick="nav(event)">üè† Home</a>
        <a href="#" data-section="courses" onclick="nav(event)">üìò My Courses</a>
        <a href="#" data-section="assignments" onclick="nav(event)">üìù Assignments</a>
        <a href="#" data-section="grades" onclick="nav(event)">üìä Grades</a>
        <a href="#" data-section="timetable" onclick="nav(event)">‚è∞ Timetable</a>
        <a href="#" data-section="messages" onclick="nav(event)">‚úâÔ∏è Messages</a>
        <a href="#" data-section="resources" onclick="nav(event)">üìÇ Resources</a>
        <a href="#" data-section="settings" onclick="nav(event)">‚öôÔ∏è Settings</a>
      </nav>

      <div class="spacer" aria-hidden="true"></div>

      <div class="profile" role="region" aria-label="Student profile">
        <img src="student.png" alt="Student avatar" id="studentAvatar">
        <div>
          <div class="name" id="studentName">Adaobi Chukwu</div>
          <div class="muted">SS2 ‚Äî Biology</div>
        </div>
      </div>
    </aside>

    <!-- Main -->
  
  <!-- REMOVE the .topbar from inside <main>; move it out and place here: -->
  <div class="topbar" id="fixedTopbar">
    <div style="display:flex; gap:12px; align-items:center;">
      <button class="hamburger" id="hamburger" aria-label="Open menu">‚ò∞</button>
      <div>
        <div class="page-title" id="pageTitle">Welcome back, Adaobi</div>
        <div class="small muted">Here‚Äôs your learning snapshot</div>
      </div>
    </div>

    <div style="display:flex; gap:12px; align-items:center;">
      <div class="small muted">Notifications</div>
      <img src="student.png" alt="You" style="width:44px;height:44px;border-radius:8px;object-fit:cover;border:2px solid #fff;">
    </div>
  </div>
  <main class="main" id="main" role="main" tabindex="-1">



      <!-- Home -->
      <section id="home" class="section">
        <div class="grid" style="margin-bottom:12px;">
          <div class="card col-4">
            <div class="small muted">Overall Progress</div>
            <div style="margin-top:10px" class="progress">
              <div class="circle" id="progCircle">71%</div>
              <div>
                <div class="small muted">Cumulative Average</div>
                <div style="font-weight:900; font-size:1.18rem;" id="cumAvg">71.2%</div>
                <div class="small muted">Top 23% of cohort</div>
              </div>
            </div>
          </div>

          <div class="card col-4">
            <div class="small muted">This Term</div>
            <div style="margin-top:10px" class="kpis">
              <div style="flex:1">
                <div class="small muted">Assignments Due</div>
                <div class="small" id="dueCount" style="font-weight:900;font-size:1.18rem">4</div>
                <div class="small muted">Due this week</div>
              </div>
              <div style="flex:1">
                <div class="small muted">Attendance</div>
                <div class="small" id="attPct" style="font-weight:900;font-size:1.18rem">92%</div>
                <div class="small muted">This term</div>
              </div>
            </div>
          </div>

          <div class="card col-4">
            <div class="small muted">Upcoming</div>
            <div style="margin-top:10px">
              <div style="font-weight:800">Biology Practical</div>
              <div class="small muted">Tue ‚Ä¢ 10:30 AM ‚Ä¢ Lab B</div>
              <div style="margin-top:10px; padding:10px; border-left:4px solid var(--accent); background:linear-gradient(90deg,#fff,#fbfdff); border-radius:8px;">Bring lab coat. Materials in Resources.</div>
            </div>
          </div>
        </div>

        <!-- FOUR-LINK CARD GRID -->
        <div class="link-grid" aria-label="Quick links">
          <a class="link-card" href="/school-fees.html" aria-label="School fees">
            <div class="icon" aria-hidden="true">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M12 1v22" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M17 5H7a4 4 0 000 8h10a4 4 0 010 8H7" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="title">School Fees</div>
            <div class="subtitle">Payments & invoices</div>
          </a>

          <a class="link-card" href="/results.html" aria-label="Results">
            <div class="icon" aria-hidden="true">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M3 3v18h18" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M7 13v4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12 9v8" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M17 5v12" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="title">Results</div>
            <div class="subtitle">View report cards</div>
          </a>

          <a class="link-card" href="/cbt-exam.html" aria-label="CBT exam">
            <div class="icon" aria-hidden="true">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <rect x="3" y="4" width="18" height="12" rx="2" stroke="currentColor" stroke-width="1.6" />
                <path d="M8 20h8" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
                <path d="M12 16v4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
              </svg>
            </div>
            <div class="title">CBT Exam</div>
            <div class="subtitle">Start computer tests</div>
          </a>

          <a class="link-card" href="/others.html" aria-label="Others">
            <div class="icon" aria-hidden="true">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <circle cx="5" cy="12" r="1.6" fill="currentColor"/>
                <circle cx="12" cy="12" r="1.6" fill="currentColor"/>
                <circle cx="19" cy="12" r="1.6" fill="currentColor"/>
              </svg>
            </div>
            <div class="title">Others</div>
            <div class="subtitle">Library, transport & more</div>
          </a>
        </div>
        <!-- /END quick links -->

        <div class="grid">
          <div class="card col-8">
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <div style="font-weight:800">Assignments</div>
              <div class="small muted">Track & submit</div>
            </div>
            <div class="assignments" id="assignmentsList" style="margin-top:10px"></div>
            <div style="margin-top:10px;display:flex;justify-content:flex-end"><button class="btn" onclick="navTo('assignments')">View all</button></div>
          </div>

          <div class="card col-4">
            <div style="font-weight:800">Quick Actions</div>
            <div style="margin-top:10px;display:flex;flex-direction:column;gap:8px;">
              <button class="btn ghost" onclick="navTo('resources')">Open Resources</button>
              <button class="btn ghost" onclick="navTo('timetable')">View Timetable</button>
              <button class="btn" onclick="openSubmit()">Submit Assignment</button>
            </div>
          </div>
        </div>

        <div class="grid" style="margin-top:12px;">
          <div class="card col-6">
            <div style="display:flex;justify-content:space-between;align-items:center;"><div style="font-weight:800">Grades Snapshot</div><div class="small muted">Latest</div></div>
            <div style="margin-top:10px">
              <table style="width:100%;border-collapse:collapse">
                <thead><tr><th style="text-align:left;padding:8px">Subject</th><th style="text-align:left;padding:8px">Latest</th><th style="text-align:left;padding:8px">Term Avg</th></tr></thead>
                <tbody id="gradesTable"></tbody>
              </table>
            </div>
          </div>

          <div class="card col-6">
            <div style="display:flex;justify-content:space-between;align-items:center;"><div style="font-weight:800">Messages</div><div class="small muted">Parent/Teacher</div></div>
            <div style="margin-top:10px" class="messages"><div class="conversations card" id="convos"></div><div class="chat card" id="chatPane">Select a conversation</div></div>
          </div>
        </div>
      </section>

      <!-- Placeholder for other sections (courses, assignments, grades, timetable, messages, resources, settings) -->
      <section id="courses" class="section" style="display:none"><div style="font-weight:800">My Courses</div><div id="coursesGrid"></div></section>
      <section id="assignments" class="section" style="display:none"><div style="font-weight:800">Assignments</div><div id="assignmentsFull"></div></section>
      <section id="grades" class="section" style="display:none"><div style="font-weight:800">Grades</div><div id="gradesFull"></div></section>
      <section id="timetable" class="section" style="display:none"><div style="font-weight:800">Timetable</div><div id="timetableFull"></div></section>
      <section id="messages" class="section" style="display:none"><div style="font-weight:800">Messages</div><div id="messagesFull"></div></section>
      <section id="resources" class="section" style="display:none"><div style="font-weight:800">Resources</div><div id="resourcesFull"></div></section>
      <section id="settings" class="section" style="display:none"><div style="font-weight:800">Settings</div><div id="settingsFull"></div></section>
    </main>
  </div>

  <script>
    // Elements
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const hamburger = document.getElementById('hamburger');
    const body = document.body;
    const main = document.getElementById('main');

    // Mobile: open sidebar as overlay, prevent document scroll and make only sidebar scrollable
    function openSidebar() {
      sidebar.classList.remove('hidden');
      sidebar.classList.add('open');
      overlay.classList.add('visible');
      // prevent page scroll (only on small screens)
      if (window.innerWidth <= 720) {
        body.classList.add('no-scroll');
        // ensure sidebar scrolls
        sidebar.style.overflowY = 'auto';
      }
      // set focus inside sidebar for accessibility
      const firstLink = sidebar.querySelector('.nav a');
      if (firstLink) firstLink.focus();
    }

    function closeSidebar() {
      sidebar.classList.remove('open');
      overlay.classList.remove('visible');
      // small screens -> hide sidebar off-canvas
      if (window.innerWidth <= 720) {
        sidebar.classList.add('hidden');
      }
      body.classList.remove('no-scroll');
    }

    // Hamburger toggles mobile sidebar
    hamburger.addEventListener('click', (e) => {
      e.stopPropagation();
      if (sidebar.classList.contains('open')) closeSidebar(); else openSidebar();
    });

    // Clicking overlay or any area outside sidebar closes it (mobile)
    overlay.addEventListener('click', closeSidebar);

    // Close sidebar when any nav link is clicked (on small screens)
    document.querySelectorAll('.nav a').forEach(a => {
      a.addEventListener('click', (e) => {
        // allow nav handler to run, then close
        if (window.innerWidth <= 720) {
          setTimeout(closeSidebar, 80);
        }
      });
    });

    // Also close when clicking outside sidebar anywhere in the document (mobile)
    document.addEventListener('click', (e) => {
      if (window.innerWidth <= 720) {
        const isInsideSidebar = sidebar.contains(e.target) || hamburger.contains(e.target);
        if (!isInsideSidebar && sidebar.classList.contains('open')) {
          closeSidebar();
        }
      }
    }, { passive: true });

    // Close with Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && sidebar.classList.contains('open')) closeSidebar();
    });

    // Ensure correct initial visibility on resize
    function handleResize() {
      if (window.innerWidth > 720) {
        // Desktop: sidebar visible and main has left margin
        sidebar.classList.remove('hidden');
        sidebar.classList.remove('open');
        overlay.classList.remove('visible');
        body.classList.remove('no-scroll');
        main.classList.remove('full');
      } else {
        // Mobile: hide sidebar by default
        if (!sidebar.classList.contains('open')) sidebar.classList.add('hidden');
        main.classList.add('full');
      }
    }
    window.addEventListener('resize', handleResize);
    handleResize();

    // Simple navigation handling (show/hide sections)
    function nav(e) {
      e.preventDefault();
      const link = e.currentTarget;
      document.querySelectorAll('.nav a').forEach(n => n.classList.remove('active'));
      link.classList.add('active');
      const id = link.getAttribute('data-section');
      showSection(id);
    }
    function navTo(section) {
      const link = document.querySelector('.nav a[data-section="' + section + '"]');
      if (link) link.click();
      else showSection(section);
    }
    function showSection(id) {
      document.querySelectorAll('main .section').forEach(s => s.style.display = 'none');
      const s = document.getElementById(id);
      if (s) s.style.display = '';
      // close sidebar on mobile to reveal content area
      if (window.innerWidth <= 720) closeSidebar();
      main.scrollTo({ top: 0, behavior: 'smooth' });
      // move focus to main for screen readers
      main.focus();
    }

    // Demo data population (same as earlier but mobile-friendly)
    const demoAssignments = [
      { id:'a1', title:'Biology Lab Report', due:'2026-03-12', class:'SS2', status:'Pending' },
      { id:'a2', title:'Physics Homework', due:'2026-03-13', class:'SS2', status:'Pending' },
      { id:'a3', title:'Chemistry Quiz', due:'2026-03-15', class:'SS2', status:'Submitted' },
      { id:'a4', title:'English Essay', due:'2026-03-20', class:'SS2', status:'Pending' }
    ];
    const demoGrades = [
      { subject:'Biology', latest: 'A', avg:'B+' },
      { subject:'Mathematics', latest: 'B', avg:'B' },
      { subject:'Chemistry', latest: 'B+', avg:'B' },
      { subject:'English', latest: 'A-', avg:'B+' }
    ];

    function populateDashboard() {
      const assignmentsList = document.getElementById('assignmentsList');
      assignmentsList.innerHTML = '';
      demoAssignments.forEach(a => {
        const el = document.createElement('div');
        el.className = 'item';
        el.style.display = 'flex';
        el.style.justifyContent = 'space-between';
        el.style.alignItems = 'center';
        el.style.gap = '12px';
        el.innerHTML = `<div style="flex:1">
            <div style="font-weight:800">${a.title}</div>
            <div class="small muted">${a.class} ‚Ä¢ Due ${a.due}</div>
          </div>
          <div style="display:flex;flex-direction:column;gap:6px;align-items:flex-end">
            <div class="small muted">${a.status}</div>
            <button class="btn" onclick="openSubmit('${a.id}')">Submit</button>
          </div>`;
        assignmentsList.appendChild(el);
      });

      const gradesTable = document.getElementById('gradesTable');
      gradesTable.innerHTML = '';
      demoGrades.forEach(g => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td style="padding:8px">${g.subject}</td><td style="padding:8px;font-weight:800">${g.latest}</td><td style="padding:8px" class="muted">${g.avg}</td>`;
        gradesTable.appendChild(tr);
      });

      const convos = document.getElementById('convos');
      convos.innerHTML = '';
      ['Class Group', 'Mrs Johnson (Biology)', 'Parent - Emeka'].forEach((c, idx) => {
        const node = document.createElement('div');
        node.style.padding = '8px'; node.style.borderRadius='8px'; node.style.marginBottom='8px'; node.style.cursor='pointer';
        node.style.background = idx === 0 ? '#fbfdff' : '#fff';
        node.innerHTML = `<div style="font-weight:700">${c}</div><div class="small muted">${idx === 0 ? '2 unread' : 'last message 2h'}</div>`;
        node.addEventListener('click', () => openConversation(c));
        convos.appendChild(node);
      });

      // courses / resources placeholders
      const cg = document.getElementById('coursesGrid'); cg.innerHTML = '';
      ['Biology','Mathematics','English','Chemistry'].forEach(name=>{
        const card = document.createElement('div'); card.className = 'card'; card.style.marginBottom='10px';
        card.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center">
          <div><div style="font-weight:800">${name}</div><div class="small muted">Teacher: Mrs Johnson</div></div>
          <div><div class="small muted">Avg: B+</div><button class="btn ghost" style="margin-top:6px" onclick="navTo('grades')">View</button></div>
        </div>`;
        cg.appendChild(card);
      });

      const rFull = document.getElementById('resourcesFull'); if (rFull) rFull.innerHTML = '<div class="small muted">No resources yet.</div>';
      const aFull = document.getElementById('assignmentsFull'); if (aFull) { aFull.innerHTML = ''; demoAssignments.forEach(a=>{ const n=document.createElement('div'); n.className='card'; n.style.marginBottom='10px'; n.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center"><div><div style="font-weight:800">${a.title}</div><div class="small muted">${a.class} ‚Ä¢ Due ${a.due}</div></div><div><button class="btn" onclick="openSubmit('${a.id}')">Submit</button></div></div>`; aFull.appendChild(n); }); }
    }

    function openConversation(name) {
      const chat = document.getElementById('chatPane');
      chat.innerHTML = `<div style="font-weight:700;margin-bottom:8px">${name}</div><div class="small muted">Conversation started</div>`;
      // on small screens, hide sidebar after opening conversation
      if (window.innerWidth <= 720) closeSidebar();
    }

    function openSubmit(id) {
      const a = demoAssignments.find(x => x.id === id);
      const modal = document.createElement('div');
      modal.style.position = 'fixed'; modal.style.inset = 0; modal.style.background = 'rgba(2,6,23,0.45)';
      modal.style.display = 'flex'; modal.style.alignItems = 'center'; modal.style.justifyContent = 'center'; modal.style.zIndex = 9999;
      modal.onclick = () => document.body.removeChild(modal);
      modal.innerHTML = `<div class="card" style="width:520px;max-width:92vw" onclick="event.stopPropagation()">
        <div style="font-weight:800">${a ? a.title : 'Submit Assignment'}</div>
        <div class="small muted" style="margin-top:6px">${a ? (a.class + ' ‚Ä¢ Due ' + a.due) : ''}</div>
        <div style="margin-top:12px"><input type="file" id="fileUp"></div>
        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
          <button class="btn ghost" onclick="document.body.removeChild(modal)">Cancel</button>
          <button class="btn" onclick="(function(){ alert('Submitted'); document.body.removeChild(modal); })()">Upload & Submit</button>
        </div>
      </div>`;
      document.body.appendChild(modal);
    }

    // initialize
    window.addEventListener('load', () => {
      populateDashboard();
      // hide sidebar by default on small screens
      if (window.innerWidth <= 720) sidebar.classList.add('hidden');
    });

    // Accessibility: close overlay with Escape
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeSidebar(); });
  </script>
</body>
</html>
