<!DOCTYPE html>
<html lang="en" class="h-full bg-slate-50">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>OAU ExamGuard — Tutor Registration</title>
  <!-- TailwindCSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
  <style>
    .form-label {
      font-weight: 600;
      color: #4f46e5;
      margin-bottom: 6px;
      display: block;
      text-transform: uppercase;
      font-size: 13px;
      letter-spacing: 1px;
    }
    .invalid { border-color: #ef4444 !important; }
    .tag {
      display: inline-flex; align-items:center; padding: 4px 10px; background:#6366f1; color:#fff;
      border-radius: 15px; font-size:13px; margin:3px 6px 3px 0; font-weight:500;
      cursor:pointer; transition:box-shadow .13s;
    }
    .tag .fa-xmark { font-size: 13px; margin-left:6px; cursor:pointer; }
    .tag:hover { box-shadow:0 2px 8px #818cf825; opacity:.93;}
    .hero-bg {
      background: linear-gradient(88deg, #ede9fe 80%, #f0efff 100%);
      border-bottom: 1px solid #e0e7ff;
    }
  </style>
</head>
<body class="bg-slate-50 text-slate-900 font-sans min-h-screen flex flex-col">

  <header class="hero-bg w-full py-5 shadow-sm mb-10">
    <div class="max-w-3xl mx-auto px-6 flex flex-col md:flex-row items-center justify-between">
      <div class="flex gap-2 items-center">
        <img src="https://ui-avatars.com/api/?name=OAU&background=ede9fe&color=3b82f6&size=40" alt="logo" class="w-8 h-8 rounded-full" />
        <span class="text-indigo-800 font-extrabold text-xl">OAU ExamGuard</span>
      </div>
      <nav class="mt-4 md:mt-0 flex gap-4 text-indigo-700 font-semibold">
        <a href="tutor-req.html" class="hover:underline">Find Tutors</a>
        <a href="nng.html" class="hover:underline text-indigo-800">Dashboard</a>
      </nav>
    </div>
    <div class="text-center mt-8 mb-2">
      <h1 class="text-3xl font-extrabold text-indigo-800 mb-2">Become a Tutor</h1>
      <div class="max-w-xl mx-auto text-gray-600 text-md font-medium">Join our select pool of expert tutors, empower students, and earn extra income while sharing your knowledge.</div>
    </div>
  </header>

  <main class="flex-1 flex items-center justify-center px-2 py-8">
    <form
      id="tutorRegForm"
      class="w-full max-w-2xl bg-white rounded-2xl shadow-lg p-8 space-y-6 border"
      autocomplete="off"
    >
      <div>
        <label class="form-label" for="fullname">Full Name</label>
        <input type="text" id="fullname" name="fullname" required maxlength="100"
               class="w-full border rounded-lg px-4 py-2 text-base focus:outline-indigo-700"/>
      </div>
      <div class="flex flex-col md:flex-row gap-5">
        <div class="flex-1">
          <label class="form-label" for="email">Email</label>
          <input type="email" id="email" name="email" required
                 class="w-full border rounded-lg px-4 py-2 text-base focus:outline-indigo-700"/>
        </div>
        <div class="flex-1">
          <label class="form-label" for="phone">Phone</label>
          <input type="tel" id="phone" name="phone" required pattern="^[0-9\-\+\(\) ]{8,18}$"
                 class="w-full border rounded-lg px-4 py-2 text-base focus:outline-indigo-700"/>
        </div>
      </div>
      <div>
        <label class="form-label" for="about">Short Bio / About You</label>
        <textarea id="about" name="about" rows="3" required maxlength="300"
                  class="w-full border rounded-lg px-4 py-2 text-base focus:outline-indigo-700"></textarea>
        <span class="text-xs text-gray-400 float-right" id="aboutCount"></span>
      </div>
      <div>
        <label class="form-label" for="subjects">Subjects / Specialties <span class="text-indigo-700">(type and Enter)</span></label>
        <div class="flex flex-wrap mb-1" id="specialtyTags"></div>
        <input id="subjectsInput" name="subjectsInput" type="text" class="w-full border rounded-lg px-4 py-2 text-base focus:outline-indigo-700" placeholder="e.g. Physics, Further Math"/>
        <input type="hidden" name="specialties" id="serializedSpecialties" />
      </div>
      <div>
        <label class="form-label" for="achievements">Achievements / Awards <span class="text-gray-400">(type & Enter, ~max 4)</span></label>
        <div class="flex flex-wrap mb-1" id="achievementsTags"></div>
        <input id="achievementsInput" name="achievementsInput" type="text" class="w-full border rounded-lg px-4 py-2 text-base focus:outline-indigo-700" placeholder="e.g. National Science Medalist"/>
        <input type="hidden" name="achievements" id="serializedAchievements" />
      </div>
      <div>
        <label class="form-label">Profile Photo URL (optional)</label>
        <input id="avatar" type="url" class="w-full border rounded-lg px-4 py-2 text-base focus:outline-indigo-700" placeholder="https://.../photo.jpg"/>
      </div>
      <div>
        <label class="form-label">Social Links (optional)</label>
        <div class="flex gap-2 mb-1 items-center">
          <input id="linkedin" type="url" placeholder="LinkedIn" class="flex-1 border rounded-lg px-3 py-2 text-base focus:outline-indigo-700"/>
          <input id="twitter" type="url" placeholder="Twitter" class="flex-1 border rounded-lg px-3 py-2 text-base focus:outline-indigo-700"/>
          <input id="instagram" type="url" placeholder="Instagram" class="flex-1 border rounded-lg px-3 py-2 text-base focus:outline-indigo-700"/>
        </div>
      </div>
      <div class="pt-6 flex items-center gap-4 justify-between">
        <button id="submitBtn" type="submit" class="bg-indigo-700 hover:bg-indigo-800 text-white font-bold text-lg px-7 py-2.5 rounded-lg shadow transition">Submit Registration</button>
        <span id="formSpinner" class="hidden text-gray-600 text-sm font-semibold"><i class="fa fa-spinner fa-spin"></i> Submitting...</span>
      </div>
      <div id="formMessage" class="text-sm font-semibold mt-1 text-center"></div>
    </form>
  </main>

  <footer class="text-center text-xs text-gray-400 mb-8 mt-12">&copy; OAU ExamGuard — Tutor Registration</footer>

<script>
// ======== SIMPLE TAG INPUTS ========
function makeTagsInput({inputId, tagContainerId, outputId, max=8}) {
  let input = document.getElementById(inputId);
  let tags = [];
  let out = document.getElementById(outputId);
  let container = document.getElementById(tagContainerId);
  // Render
  function render() {
    container.innerHTML = '';
    tags.forEach((t,idx) => {
      container.innerHTML += `<span class="tag">${t}<i class="fa fa-xmark ml-1" onclick="removeTag${inputId}(${idx})"></i></span>`;
    });
    out.value = JSON.stringify(tags);
    input.value = '';
    input.classList.remove('invalid');
  }
  // Remove
  window[`removeTag${inputId}`] = (idx) => {
    tags.splice(idx,1); render();
  };
  // Add on Enter
  input.addEventListener('keydown', function(e){
    if ((e.key === 'Enter' || e.key === ',') && input.value.trim()) {
      e.preventDefault();
      if(tags.length>=max) return input.classList.add('invalid');
      let val = input.value.trim();
      if(val.length && !tags.includes(val)){ tags.push(val); render(); }
    }
  });
  return {
    get: ()=>tags,
    set: arr=>{ tags=arr;render(); }
  };
}

const specialtyTagManager = makeTagsInput({inputId:'subjectsInput',tagContainerId:'specialtyTags',outputId:'serializedSpecialties',max:8});
const achievementsTagManager = makeTagsInput({inputId:'achievementsInput',tagContainerId:'achievementsTags',outputId:'serializedAchievements',max:4});

// About bio length warning
const aboutElem = document.getElementById('about');
const aboutCountElem = document.getElementById('aboutCount');
if (aboutElem && aboutCountElem) {
  aboutElem.addEventListener('input', ()=>{
    aboutCountElem.textContent = (aboutElem.value.length) + "/300";
  });
}

// =========== FORM SUBMISSION ===========
document.getElementById('tutorRegForm').addEventListener('submit', async function(e){
  e.preventDefault();
  const submitBtn = document.getElementById('submitBtn');
  const spinner = document.getElementById('formSpinner');
  const msg = document.getElementById('formMessage');
  submitBtn.disabled = true; spinner.classList.remove('hidden'); msg.textContent = '';

  // Gather form data
  const form = e.target;
  let data = {
    fullname: form.fullname.value.trim(),
    email: form.email.value.trim(),
    phone: form.phone.value.trim(),
    about: form.about.value.trim(),
    specialties: JSON.parse(form.specialties.value||"[]"),
    achievements: JSON.parse(form.achievements.value||"[]"),
    avatar: form.avatar.value.trim(),
    socials: {}
  };
  if(form.linkedin.value.trim()) data.socials.linkedin = form.linkedin.value.trim();
  if(form.twitter.value.trim()) data.socials.twitter = form.twitter.value.trim();
  if(form.instagram.value.trim()) data.socials.instagram = form.instagram.value.trim();

  // Simple validation
  if (!data.fullname || !data.email || !data.phone || !data.about || data.specialties.length===0) {
    msg.textContent = "Please fill in all required fields and enter at least 1 specialty.";
    msg.style.color = "#ef4444";
    submitBtn.disabled = false; spinner.classList.add('hidden'); return;
  }
  // Simulate POST to server (replace with real API fetch!)
  setTimeout(()=>{
    msg.textContent = "Thank you, " + data.fullname.split(" ")[0] + "! Your tutor registration has been submitted.";
    msg.style.color = "#16a34a";
    form.reset(); 
    specialtyTagManager.set([]); 
    achievementsTagManager.set([]);
    aboutCountElem.textContent = "0/300";
    submitBtn.disabled = false; spinner.classList.add('hidden');
    window.scrollTo({top:0,behavior:'smooth'});
  }, 1800);
});

</script>
</body>
</html>
