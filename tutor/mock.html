<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OAU ExamGuard | Mock Exam Access</title>
        <meta name="description" content="OAU ExamGuard offers authentic OAU mock tests, past questions, a trusted student marketplace, and a vibrant blogging community. Prepare, connect, and earn on OAU's leading academic platform."/>
<meta name="keywords" content="School News, download examguide, examking, examguide app, examguide, ExamGuide, ssce, SSCE, ExamGuide ssce, Post Utme, OAU News, OAU earnings, examguard, oau, OAU, Post Utme, News Update, OAU news update, post utme news update, school, university, finance, earning, earnings, smart contracts, examguard nigeria, online test, mock exams, study materials, nigeria, past questions, blockchain technology, students, contracts, online examination conducting system, blog, questions, technology, questions, platforms, learning, Write and Earn, Students Earning platform, OAU, ExamGuard Nigeria, OAU ExamGuard, Obafemi Awolowo University, School News, Best Online Marketing Platform, Blog, Marketplace, Mock Tests"/>
  <meta name="robots" content="index,follow" />
  <link rel="canonical" href="https://oau.examguard.com.ng/" />
  <!-- Open Graph -->
<script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
<script>
  window.OneSignalDeferred = window.OneSignalDeferred || [];
  OneSignalDeferred.push(async function(OneSignal) {
    await OneSignal.init({
      appId: "de984d09-6c6d-4157-87b6-fe41f125715f",
    });
  });
</script>
  <meta name="referrer" content="no-referrer-when-downgrade" />
  <meta name="457a6c6a562f7c34078abe6ed803006fae358aef" content="457a6c6a562f7c34078abe6ed803006fae358aef" />
  <!-- Animate.css CDN for fade-in (optional, enhances effect) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
<meta name="clckd" content="224c6ca89b34eeb09c97fb556ece5656" />
  <meta name="google-site-verification" content="1xsUKdZie_UFDQv0BXYoQjyaEPzJCVb89H2S2CwquA0" />
  <meta name="google-adsense-account" content="ca-pub-8296874482515167">
  <meta property="og:title" content="OAU ExamGuard | OAU Mock Tests, Marketplace, Blog & Student Community" />
  <meta property="og:description" content="Join OAU students for mock tests, past questions, blogging, and a safe student marketplace. Your exam, our priority." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://oau.examguard.com.ng/" />
  <meta property="og:image" content="https://res.cloudinary.com/da7o22rnq/image/upload/v1766033098/editor-uploads/hqkaws7fzstlyyuamlxf.png" />
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="OAU ExamGuard | Mock Tests, Marketplace, Blog" />
  <meta name="twitter:description" content="Mock tests, past questions, marketplace, and blogging for OAU students." />
  <meta name="twitter:image" content="https://oau.examguard.com.ng/oaugate-1140x570.jpg" />
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="logo.png" />
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Flowbite CDN -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.css" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"></script>
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "OAU ExamGuard",
  "url": "https://oau.examguard.com.ng/",
  "logo": "https://oau.examguard.com.ng/logo.png",
  "sameAs": [
    "https://twitter.com/OAUExamGuard",
    "https://facebook.com/OAUExamGuard"
  ]
}
</script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <style>
        body {
            background: #f6f8fa;
            font-family: 'Inter', system-ui, sans-serif;
        }
        .access-card {
            background: #fff;
            border-radius: 1.55em;
            border: 1px solid #e5e7eb;
            box-shadow: 0 2px 13px #e0e7ff23;
            padding: 2.3rem 1.5rem;
            max-width: 400px;
        }
        .access-card input, .access-card input:focus {
            background: #f9fafc;
        }
        .input-focus:focus { border-color: #1e40af; box-shadow: 0 0 0 1px #1e40af22; }
        #intro-desc {
            color: #6366f1;
        }
        .action-btn, #access-btn, #login-btn {
            background: #ffd500;
            color: #232946;
        }
        .action-btn:hover, #access-btn:hover, #login-btn:hover {
            background: #232946;
            color: #ffd500;
        }
        .modal-bg {
            position: fixed;
            z-index: 40;
            inset: 0;
            background: rgba(30,41,59,0.18);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-panel {
            background: #fff;
            border-radius: 1.4em;
            box-shadow: 0 3px 18px #33415523;
            padding: 2rem 1.3rem 1.6rem 1.3rem;
            min-width: 270px;
            max-width: 96vw;
            max-height: 92vh;
            text-align: center;
        }
        .pay-details {
            background: #fffbea;
            border: 1px solid #fde68a;
            border-radius: 1em;
            text-align: left;
            padding: 1em 1.4em;
            margin: 0.5em 0 0.2em 0;
            font-size: .99em;
            color: #374151;
        }
        .pay-details strong { color: #b45309; }
        .spinner {
            display:inline-block;width:1.25em;height:1.25em;border:3px solid #fff;border-radius:50%;
            border-top:3px solid #232946;animation:spin 0.85s linear infinite;vertical-align:-0.25em;
        }
        @keyframes spin{to{transform:rotate(360deg);}}
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">
    <!-- Navbar minimal user context -->
    <nav class="fixed w-full z-30 top-0 left-0 glass shadow-sm border-b border-blue-900/25 bg-white/90 backdrop-blur">
        <div class="max-w-3xl mx-auto px-4 flex justify-between items-center h-16">
            <a class="flex items-center gap-2 font-bold text-xl text-yellow-600" href="index.html">
                <img src="../logo.png" class="h-8" alt="logo">
                <span class="text-blue-900">OAU</span> <span class="text-yellow-600">ExamGuard</span>
            </a>
            <span class="text-xs text-blue-900 hidden sm:inline">Exam Access Page</span>
        </div>
    </nav>
    <main class="flex-1 w-full flex flex-col justify-center items-center pt-24 pb-8">
        <div class="access-card mx-auto w-full" id="main-card">
            <!-- Header -->
            <div class="mb-8 text-center">
                <div class="mb-2">
                    <i class="fas fa-lock text-yellow-500 text-4xl mb-2"></i>
                </div>
                <h1 class="text-xl sm:text-2xl font-extrabold text-blue-800 mb-1 tracking-wide">
                    OAU Mock Exam Access
                </h1>
                <p class="text-sm font-semibold" id="intro-desc">
                    Log in and enter your course/access code to start your test.
                </p>
            </div>
            <!-- Login form -->
            <form id="login-form" autocomplete="off" class="space-y-7 hidden">
                <div>
                    <label for="regNumber" class="block text-sm font-semibold text-gray-700 mb-1">
                        Email, Username, or Matric/User ID
                    </label>
                    <input type="text" id="regNumber" name="regNumber"
                        class="input-focus block w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none transition"
                        placeholder="e.g. ENG/2022/1234, email, or username/userID" required />
                </div>
                <div>
                    <label for="password" class="block text-sm font-semibold text-gray-700 mb-1">Password</label>
                    <input type="password" id="password" name="password"
                        class="input-focus block w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none transition"
                        placeholder="Enter your password" required />
                </div>
                <div>
                    <button type="submit" id="login-btn"
                        class="w-full py-3 px-6 rounded-xl action-btn font-bold text-lg shadow hover:scale-105 transition relative flex items-center justify-center gap-2">
                        <i class="fas fa-sign-in-alt"></i> <span>Log In</span>
                    </button>
                </div>
                <div id="login-error-message" class="text-red-500 text-center font-medium text-sm hidden"></div>
            </form>
            <!-- Access code form -->
            <form id="access-form" autocomplete="off" class="space-y-7 hidden">
                <div>
                    <label for="showRegNumber" class="block text-sm font-semibold text-gray-700 mb-1">Name <span class="text-gray-400 text-xs">(read-only)</span></label>
                    <input type="text" id="showRegNumber"
                        class="block w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-100 shadow-sm text-gray-700 font-bold cursor-not-allowed"
                        readonly disabled />
                </div>
                <div class="flex items-center justify-between mb-2">
                    <div class="block text-sm font-semibold text-gray-700">Credits</div>
                    <span id="studentCredit" class="text-lg font-bold text-yellow-600"></span>
                </div>
                <div>
                    <label for="courseCode" class="block text-sm font-semibold text-gray-700 mb-1">Course Code</label>
                    <input type="text" id="courseCode" name="courseCode"
                        class="input-focus block w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none transition"
                        placeholder="e.g. MTH101" required />
                </div>
                <div>
                    <label for="accessCode" class="block text-sm font-semibold text-gray-700 mb-1">Access Code <span class="text-xs text-gray-400">(normally same as course code)</span></label>
                    <input type="password" id="accessCode" name="accessCode"
                        class="input-focus block w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none transition"
                        placeholder="Enter access code" required />
                </div>
                <div>
                    <button type="submit" id="access-btn"
                        class="w-full py-3 px-6 rounded-xl action-btn font-bold text-lg shadow hover:scale-105 transition relative flex items-center justify-center gap-2">
                        <i class="fas fa-arrow-right"></i> <span>Access Exam</span>
                    </button>
                </div>
                <div id="error-message" class="text-red-500 text-center font-medium text-sm hidden"></div>
                <div id="credit-message" class="text-blue-700 text-center font-medium text-sm mt-2"></div>
            </form>
            <div id="login-section" class="mt-4 text-center text-gray-700 text-sm"></div>
        </div>
    </main>
    <div id="modal-root"></div>
    <footer class="w-full bg-gray-900 text-gray-400 py-5 text-center text-xs mt-12 rounded-xl shadow">
      &copy; <span id="year"></span> OAU ExamGuard Nigeria. <span class="text-white">Your Exam, Our Priority.</span>
    </footer>
    <script>
    // ==== CONFIG ====
    const API_BASE = "https://examguide.onrender.com";

    // ==== UTILITIES ====
    function setToken(token) { localStorage.setItem("student_jwt_token", token); }
    function getToken() { return localStorage.getItem("student_jwt_token"); }
    function clearToken() { localStorage.removeItem("student_jwt_token"); localStorage.removeItem('token'); }

    function setBtnSpinner(btn, show, text = "") {
        if (show) {
            btn.disabled = true;
            btn._realText = btn.querySelector('span')?.textContent;
            btn.querySelector('span').innerHTML = `<span class="mr-2 spinner"></span> ${text || "Processing"}`;
        } else {
            btn.disabled = false;
            if (btn._realText) btn.querySelector('span').textContent = btn._realText;
        }
    }
    function showModal(options) {
        let studentName = currentUser?.fullName || currentUser?.fullname || currentUser?.name || currentUser?.username || currentUser?.email || "";
        let studentEmail = currentUser?.email || currentUser?.matricNo || currentUser?.matricNumber || "";
        let studentMsg = "";
        if (options.type === "credit") {
            let details = `Hello, I want to purchase ExamGuard credits.\n\nName: ${studentName}\nEmail/Matric: ${studentEmail}`;
            studentMsg = encodeURIComponent(details);
        }
        const root = document.getElementById("modal-root");
        root.innerHTML = `
            <div class="modal-bg">
                <div class="modal-panel">
                    <div class="flex flex-col items-center space-y-2 mb-2">
                        <i class="fa fa-info-circle text-yellow-500 text-4xl mb-2 animate-bounce"></i>
                        <div class="text-lg font-extrabold text-blue-800 mb-1">${options.title || "Notice"}</div>
                        <p class="text-base text-gray-700 mb-3">${options.message}</p>
                        ${
                            options.type === "credit"
                            ? `<div class="pay-details mb-1">
                                  <div><strong>Bank Name:</strong> Opay Microfinance Bank</div>
                                  <div><strong>Account Name:</strong> Ochuko Timothy Richard</div>
                                  <div><strong>Account Number:</strong> <span class="font-mono text-lg text-yellow-700">9070962822</span></div>
                              </div>
                              <div class="text-xs text-gray-600 mb-3">
                                After payment, send your receipt to admin via WhatsApp below for instant credit.
                              </div>`
                            : ""
                        }
                        ${
                            options.cta
                            ? `<a href="${options.type === "credit" ? ("https://wa.me/2349056254709?text=" + studentMsg) : options.ctaHref || "#"}"
                                target="_blank" rel="noopener"
                               class="mt-2 w-full flex items-center justify-center gap-2 py-3 px-5 rounded-2xl font-bold text-white bg-green-600 hover:bg-green-700 shadow transform hover:scale-105 transition"
                               style="text-decoration:none">
                                <i class="fab fa-whatsapp text-2xl"></i>
                                ${options.cta}
                            </a>`
                            : ""
                        }
                        <button id="close-modal-btn"
                          class="mt-3 py-2 px-7 bg-blue-800 text-white font-semibold rounded-xl hover:bg-blue-900 shadow-sm transition">
                          Close
                        </button>
                    </div>
                </div>
            </div>
        `;
        document.getElementById("close-modal-btn").onclick = () => { root.innerHTML = ""; };
    }
    const loginForm = document.getElementById('login-form');
    const accessForm = document.getElementById('access-form');
    const loginSection = document.getElementById('login-section');
    const regNumInput = document.getElementById('regNumber');
    const showRegNumber = document.getElementById('showRegNumber');
    const studentCreditElem = document.getElementById('studentCredit');
    const passwordInput = document.getElementById('password');
    const loginErrMsg = document.getElementById('login-error-message');
    const errorElem = document.getElementById('error-message');
    const introDesc = document.getElementById('intro-desc');
    const loginBtn = document.getElementById('login-btn');
    const accessBtn = document.getElementById('access-btn');
    let currentUser = null;
    document.addEventListener("DOMContentLoaded", function() {
        const courseCodeInput = document.getElementById('courseCode');
        const accessCodeInput = document.getElementById('accessCode');
        const params = new URLSearchParams(window.location.search);
        const coursePrefill = params.get("examCode") || params.get("courseCode") || "";
        const accessPrefill = params.get("accessCode") || "";
        if(coursePrefill) courseCodeInput.value = coursePrefill;
        if(accessPrefill) accessCodeInput.value = accessPrefill;
        courseCodeInput.addEventListener('input', function() {
            if (courseCodeInput.value && 
                (!accessCodeInput.value || accessCodeInput.value.length < 4)) {
                accessCodeInput.value = courseCodeInput.value;
            }
        });
        document.getElementById('year').textContent = new Date().getFullYear();
    });
    async function fetchProfile(token) {
        try {
            const res = await fetch(API_BASE + "/api/auth/me", {
                headers: { Authorization: "Bearer " + token }
            });
            if (!res.ok) throw new Error("Not authenticated");
            const json = await res.json();
            return json.user || json;
        } catch (err) { return null; }
    }
    function showLogin() {
        loginForm.classList.remove("hidden");
        accessForm.classList.add("hidden");
        loginSection.innerHTML = '';
        introDesc.textContent = "Log in and enter your course/access code to start your test.";
    }
    function showAccess(user) {
        loginForm.classList.add("hidden");
        accessForm.classList.remove("hidden");
        const displayName = user.fullName || user.fullname || user.name || user.username || user.email || user.studentId || user.matricNumber || "";
        const idOrEmail = user.email || user.matricNo || user.studentId || user.matricNumber || user.username || "";
        showRegNumber.value = displayName + " (" + idOrEmail + ")";
        showRegNumber.dataset.regnum = idOrEmail;
        loginSection.innerHTML = `
            <div><i class="fas fa-user-check text-green-600"></i> Logged in as <b>${displayName}</b></div>
            <div class="text-gray-500">Credits: <b id="login-credit-show">${user.creditPoints != null ? user.creditPoints : (user.credits != null ? user.credits : "--")}</b></div>
            <button onclick="logoutUser()" class="text-xs text-blue-600 underline hover:text-blue-900 mt-2">Not you? Log out</button>
        `;
        introDesc.textContent = "Enter your course/access code to proceed";
        studentCreditElem.innerText = user.creditPoints != null ? user.creditPoints : (user.credits != null ? user.credits : "--");
    }
    function logoutUser() {
        clearToken();
        location.reload();
    }
    window.logoutUser = logoutUser;
    (async function checkAuthOnLoad() {
        const token = getToken() || localStorage.getItem('token');
        if (token) {
            const user = await fetchProfile(token);
            if (user && user._id) {
                setToken(token);
                currentUser = user;
                showAccess(user);
            } else {
                clearToken();
                showLogin();
            }
        } else {
            showLogin();
        }
    })();
    loginForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        loginErrMsg.classList.add("hidden");
        setBtnSpinner(loginBtn, true, "Logging in...");
        const regnumber = regNumInput.value.trim();
        const password = passwordInput.value;
        if (!regnumber || !password) {
            loginErrMsg.textContent = "All fields are required.";
            loginErrMsg.classList.remove("hidden");
            setBtnSpinner(loginBtn, false);
            return;
        }
        try {
            // Use any identifier - username/email/matricNo/userID
            const response = await fetch(API_BASE + "/api/auth/login", {
                method: "POST",
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username: regnumber, password })
            });
            const data = await response.json();
            if (response.ok && data.token) {
                localStorage.setItem('token', data.token);
                setToken(data.token);
                let meResp = await fetch(API_BASE + "/api/auth/me", {
                    headers: { 'Authorization': 'Bearer ' + data.token }
                });
                let meData = await meResp.json();
                const user = meData.user || meData;
                if (meResp.ok && user && user._id) {
                    setToken(data.token);
                    currentUser = user;
                    setBtnSpinner(loginBtn, false);
                    showAccess(user);
                } else {
                    loginErrMsg.textContent = "Login succeeded, but profile not found.";
                    loginErrMsg.classList.remove("hidden");
                    setBtnSpinner(loginBtn, false);
                }
            } else {
                loginErrMsg.textContent = data.message || "Invalid credentials.";
                loginErrMsg.classList.remove("hidden");
                setBtnSpinner(loginBtn, false);
            }
        } catch (err) {
            loginErrMsg.textContent = "Server/network error, try again.";
            loginErrMsg.classList.remove("hidden");
            setBtnSpinner(loginBtn, false);
        }
    });
    accessForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        errorElem.classList.add("hidden");
        document.getElementById("credit-message").textContent = "";
        setBtnSpinner(accessBtn, true, "Checking...");
        if (!currentUser) {
            errorElem.textContent = "User session expired. Please log in again.";
            errorElem.classList.remove("hidden");
            clearToken();
            localStorage.removeItem('token');
            setTimeout(() => location.reload(), 1400);
            setBtnSpinner(accessBtn, false);
            return;
        }
        const accessCode = document.getElementById('accessCode').value.trim();
        const courseCode = document.getElementById('courseCode').value.trim();
        if (accessCode.length < 4) {
            errorElem.textContent = "Access Code must be at least 4 characters.";
            errorElem.classList.remove("hidden");
            setBtnSpinner(accessBtn, false);
            return;
        }
        if (courseCode.length < 3) {
            errorElem.textContent = "Course Code is required.";
            errorElem.classList.remove("hidden");
            setBtnSpinner(accessBtn, false);
            return;
        }
        try {
            const response = await fetch(`${API_BASE}/api/student/exam-set/use-credit-v2`, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    Authorization: "Bearer " + (getToken() || localStorage.getItem('token'))
                },
                body: JSON.stringify({ accessCode })
            });
            const data = await response.json();
            if (!response.ok) {
                setBtnSpinner(accessBtn, false);
                if ((data.message && data.message.toLowerCase().includes("insufficient")) ||
                    (data.creditPoints !== undefined && data.creditPoints < 10)) {
                    showModal({
                        title: "Not Enough Credit",
                        message: "You need at least <b>8 credits</b> to access a mock test.<br><br>" +
                            "<span class='text-blue-600 font-semibold'>Get more credits below</span> " +
                            "<span class='block text-gray-500 mt-3'>300cr = â‚¦900 only</span>",
                        cta: "Contact Admin for Credit",
                        type: "credit"
                    });
                } else {
                    errorElem.textContent = data.message || "Unable to access exam.";
                    errorElem.classList.remove("hidden");
                }
                if (data.creditPoints !== undefined) {
                    studentCreditElem.innerText = data.creditPoints;
                    const loginCreditShow = document.getElementById("login-credit-show");
                    if(loginCreditShow) loginCreditShow.innerText = data.creditPoints;
                }
                return;
            }
            localStorage.setItem("exam_access_code", accessCode);
            localStorage.setItem("exam_course_code", courseCode);
            setBtnSpinner(accessBtn, false);
            document.getElementById("credit-message").textContent =
                `8 credits deducted. Remaining: ${data.creditPoints}`;
            setTimeout(() => { window.location.href = "exam-in-session"; }, 900);
        } catch (err) {
            errorElem.textContent = "Network or server error. Try again.";
            errorElem.classList.remove("hidden");
            setBtnSpinner(accessBtn, false);
        }
    });
    </script>
</body>
</html>
